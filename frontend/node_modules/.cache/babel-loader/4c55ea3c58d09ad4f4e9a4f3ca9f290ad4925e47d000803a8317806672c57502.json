{"ast":null,"code":"import { ref, computed, onMounted } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { Document, Upload } from '@element-plus/icons-vue';\nimport { ElMessage } from 'element-plus';\nexport default {\n  __name: 'Home',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const router = useRouter();\n    const userInfo = computed(() => store.state.user);\n\n    // 当前日期\n    const currentDate = computed(() => {\n      const date = new Date();\n      return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;\n    });\n\n    // 统计数据\n    const uploadCount = ref(0);\n    const reviewCount = ref(0);\n\n    // 快捷操作\n    const quickActions = [{\n      title: '上传材料',\n      description: '上传新的教学材料',\n      icon: 'Upload',\n      iconClass: 'upload-icon',\n      path: '/teacher/material-upload'\n    }, {\n      title: '材料审核',\n      description: '查看材料审核状态',\n      icon: 'Document',\n      iconClass: 'review-icon',\n      path: '/teacher/material-review'\n    }, {\n      title: '返回首页',\n      description: '回到教师首页',\n      icon: 'HomeFilled',\n      iconClass: 'home-icon',\n      path: '/teacher/home'\n    }];\n\n    // 最近上传的材料\n    const recentMaterials = ref([]);\n    // 待审核的材料\n    const pendingReviews = ref([]);\n\n    // 教学材料任务相关\n    const materialTasks = ref([]);\n    const uncompletedTasksCount = ref(0);\n\n    // 获取用户信息\n    const fetchUserInfo = async () => {\n      console.log('开始获取用户信息');\n      try {\n        // 从localStorage获取用户信息\n        const token = localStorage.getItem('token');\n        if (!token) {\n          console.error('用户未登录，请先登录');\n          ElMessage.warning('用户未登录，请先登录');\n          router.push('/login');\n          throw new Error('未登录');\n        }\n\n        // 如果store中已有用户信息，则不重复获取\n        if (userInfo.value && userInfo.value.id) {\n          console.log('从store获取到用户信息:', userInfo.value);\n          return userInfo.value;\n        }\n\n        // 从localStorage尝试获取\n        const localUserInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');\n        if (localUserInfo && localUserInfo.id) {\n          store.commit('SET_USER', localUserInfo);\n          console.log('从localStorage获取并设置用户信息:', localUserInfo);\n          return localUserInfo;\n        }\n\n        // 如果本地存储也没有，则从服务器获取\n        console.log('从服务器获取用户信息');\n        const response = await axios.get('/api/user/info');\n        if (response.data.code === 200 && response.data.data) {\n          store.commit('SET_USER', response.data.data);\n          localStorage.setItem('userInfo', JSON.stringify(response.data.data));\n          console.log('从服务器获取并设置用户信息成功:', response.data.data);\n          return response.data.data;\n        } else {\n          console.warn('获取用户信息失败:', response.data);\n          router.push('/login');\n          throw new Error('获取用户信息失败');\n        }\n      } catch (error) {\n        console.error('获取用户信息出错:', error);\n        router.push('/login');\n        throw error;\n      }\n    };\n\n    // 获取最近上传的材料\n    const fetchRecentMaterials = async () => {\n      try {\n        // 获取用户ID，首先从Vuex尝试获取\n        let teacherId = userInfo.value?.id;\n\n        // 如果不存在，尝试从localStorage获取\n        if (!teacherId) {\n          console.warn('从Vuex未获取到教师ID，尝试从localStorage获取');\n          const localUserInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');\n          teacherId = localUserInfo.id;\n        }\n\n        // 如果仍然无法获取ID，则退出\n        if (!teacherId) {\n          console.error('无法获取教师ID，请重新登录');\n          return;\n        }\n        console.log('开始获取最近上传材料，教师ID:', teacherId);\n\n        // 请求API\n        const response = await axios.get('/api/material/teacher', {\n          params: {\n            current: 1,\n            size: 5,\n            teacherId: teacherId,\n            type: 0 // 0表示上传的材料\n          }\n        });\n        console.log('最近上传材料响应:', response.data);\n\n        // 处理响应数据\n        if (response.data && response.data.code === 200 && response.data.data) {\n          recentMaterials.value = response.data.data.records || [];\n          uploadCount.value = response.data.data.total || 0;\n          console.log('已设置最近上传材料数据:', recentMaterials.value.length);\n          console.log('已设置上传总数:', uploadCount.value);\n        } else {\n          console.warn('获取最近上传材料返回异常:', response.data);\n          recentMaterials.value = [];\n          uploadCount.value = 0;\n        }\n      } catch (error) {\n        console.error('获取最近上传材料失败:', error);\n        recentMaterials.value = [];\n        uploadCount.value = 0;\n      }\n    };\n\n    // 获取待审核的材料\n    const fetchPendingReviews = async () => {\n      try {\n        // 获取用户ID，首先从Vuex尝试获取\n        let teacherId = userInfo.value?.id;\n\n        // 如果不存在，尝试从localStorage获取\n        if (!teacherId) {\n          console.warn('从Vuex未获取到教师ID，尝试从localStorage获取');\n          const localUserInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');\n          teacherId = localUserInfo.id;\n        }\n\n        // 如果仍然无法获取ID，则退出\n        if (!teacherId) {\n          console.error('无法获取教师ID，请重新登录');\n          return;\n        }\n        console.log('开始获取待审核材料，教师ID:', teacherId);\n\n        // 请求API\n        const response = await axios.get('/api/material-review/teacher-submit', {\n          params: {\n            current: 1,\n            size: 5,\n            teacherId: teacherId\n            // 不指定status，获取所有状态的审核\n          }\n        });\n        console.log('待审核材料响应:', response.data);\n\n        // 处理响应数据\n        if (response.data && response.data.code === 200 && response.data.data) {\n          pendingReviews.value = response.data.data.records || [];\n          console.log('已设置待审核材料数据:', pendingReviews.value.length);\n\n          // 计算审核中的材料数量 - 状态为1,2,3,4的表示审核中\n          const inReviewCount = pendingReviews.value.filter(item => item.status === 1 || item.status === 2 || item.status === 3 || item.status === 4).length;\n          reviewCount.value = inReviewCount;\n          console.log('已设置审核中数量:', reviewCount.value);\n        } else {\n          console.warn('获取待审核材料返回异常:', response.data);\n          pendingReviews.value = [];\n          reviewCount.value = 0;\n        }\n      } catch (error) {\n        console.error('获取待审核材料失败:', error);\n        pendingReviews.value = [];\n        reviewCount.value = 0;\n      }\n    };\n\n    // 状态相关工具函数\n    const getStatusText = status => {\n      switch (status) {\n        case 0:\n          return '待审核';\n        case 1:\n          return '课程负责人审核中';\n        case 2:\n          return '专业负责人审核中';\n        case 3:\n          return '副院长审核中';\n        case 4:\n          return '教务人员审核中';\n        case 5:\n          return '审核通过';\n        case 6:\n          return '审核不通过';\n        default:\n          return '未知状态';\n      }\n    };\n    const getStatusType = status => {\n      switch (status) {\n        case 0:\n          return 'info';\n        case 1:\n        case 2:\n        case 3:\n        case 4:\n          return 'warning';\n        case 5:\n          return 'success';\n        case 6:\n          return 'danger';\n        default:\n          return 'info';\n      }\n    };\n\n    // 页面跳转\n    const navigateTo = path => {\n      router.push(path);\n    };\n\n    // 获取教学材料任务\n    const fetchMaterialTasks = async () => {\n      console.log('======= 开始执行fetchMaterialTasks函数 =======', new Date().toISOString());\n      try {\n        // 获取用户ID\n        let teacherId = userInfo.value?.id;\n\n        // 如果Vuex中没有，尝试从localStorage获取\n        if (!teacherId) {\n          console.warn('从Vuex未获取到教师ID，尝试从localStorage获取');\n          const localUserInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');\n          teacherId = localUserInfo.id;\n        }\n        if (!teacherId) {\n          console.error('无法获取教师ID，未加载用户信息');\n          throw new Error('无法获取教师ID');\n        }\n        console.log('开始获取教师任务列表，教师ID:', teacherId);\n        console.log('请求URL:', '/api/material-task/teacher/tasks');\n\n        // 构造请求配置，确保请求头和参数正确\n        const config = {\n          url: '/api/material-task/teacher/tasks',\n          method: 'get',\n          params: {\n            teacherId\n          },\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`,\n            'Content-Type': 'application/json'\n          }\n        };\n        console.log('请求配置:', JSON.stringify(config));\n\n        // 发起请求\n        console.log('正在发送请求...');\n        const response = await axios(config);\n        console.log('接收到教师任务列表响应:', response.status);\n        console.log('响应数据:', JSON.stringify(response.data));\n        if (response.data.code === 200) {\n          materialTasks.value = response.data.data || [];\n          console.log('成功获取任务列表，数量:', materialTasks.value.length);\n          if (materialTasks.value.length > 0) {\n            console.log('任务列表第一项:', JSON.stringify(materialTasks.value[0]));\n          } else {\n            console.warn('任务列表为空');\n          }\n\n          // 计算未完成任务数量\n          uncompletedTasksCount.value = materialTasks.value.filter(task => !task.completed).length;\n          console.log('未完成任务数量:', uncompletedTasksCount.value);\n        } else {\n          console.error('获取教师任务列表失败:', response.data.message);\n          materialTasks.value = [];\n          uncompletedTasksCount.value = 0;\n        }\n      } catch (error) {\n        console.error('获取教学材料任务失败:', error);\n        console.error('错误详情:', error.response || error.message || error);\n        materialTasks.value = [];\n        uncompletedTasksCount.value = 0;\n        ElMessage.error('获取任务列表失败: ' + (error.message || '未知错误'));\n      } finally {\n        console.log('======= fetchMaterialTasks函数执行结束 =======');\n      }\n    };\n\n    // 判断任务是否过期\n    const isTaskExpired = deadline => {\n      if (!deadline) return false;\n      const deadlineDate = new Date(deadline);\n      const now = new Date();\n      return deadlineDate < now;\n    };\n\n    // 处理为任务上传材料\n    const handleUploadForTask = task => {\n      // 跳转到材料上传页面并传递任务参数\n      router.push({\n        path: '/teacher/material-upload',\n        query: {\n          taskId: task.id,\n          materialTypeId: task.materialTypeId,\n          courseId: task.courseId,\n          academicYear: task.academicYear,\n          semester: task.semester\n        }\n      });\n    };\n\n    // 查看已上传的材料\n    const viewUploadedMaterial = materialId => {\n      if (!materialId) return;\n      window.open(`/api/material/download/${materialId}`, '_blank');\n    };\n\n    // 在组件挂载时获取数据\n    onMounted(() => {\n      console.log('====== 教师首页组件挂载 ======');\n\n      // 先获取用户信息\n      fetchUserInfo().then(() => {\n        console.log('用户信息获取完成，开始获取任务数据');\n        // 依次调用其他数据获取函数\n        fetchRecentMaterials();\n        fetchPendingReviews();\n\n        // 确保在获取用户信息后调用任务获取\n        console.log('准备调用fetchMaterialTasks函数');\n        fetchMaterialTasks();\n      }).catch(err => {\n        console.error('获取用户信息失败，无法继续获取任务:', err);\n      });\n\n      // 取消自动更新，避免干扰调试\n      // setInterval(() => {\n      //   fetchMaterialTasks();\n      // }, 300000); // 5分钟更新一次任务数据\n    });\n    const __returned__ = {\n      store,\n      router,\n      userInfo,\n      currentDate,\n      uploadCount,\n      reviewCount,\n      quickActions,\n      recentMaterials,\n      pendingReviews,\n      materialTasks,\n      uncompletedTasksCount,\n      fetchUserInfo,\n      fetchRecentMaterials,\n      fetchPendingReviews,\n      getStatusText,\n      getStatusType,\n      navigateTo,\n      fetchMaterialTasks,\n      isTaskExpired,\n      handleUploadForTask,\n      viewUploadedMaterial,\n      ref,\n      computed,\n      onMounted,\n      get useStore() {\n        return useStore;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      get Document() {\n        return Document;\n      },\n      get Upload() {\n        return Upload;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","useStore","useRouter","axios","Document","Upload","ElMessage","store","router","userInfo","state","user","currentDate","date","Date","getFullYear","getMonth","getDate","uploadCount","reviewCount","quickActions","title","description","icon","iconClass","path","recentMaterials","pendingReviews","materialTasks","uncompletedTasksCount","fetchUserInfo","console","log","token","localStorage","getItem","error","warning","push","Error","value","id","localUserInfo","JSON","parse","commit","response","get","data","code","setItem","stringify","warn","fetchRecentMaterials","teacherId","params","current","size","type","records","total","length","fetchPendingReviews","inReviewCount","filter","item","status","getStatusText","getStatusType","navigateTo","fetchMaterialTasks","toISOString","config","url","method","headers","task","completed","message","isTaskExpired","deadline","deadlineDate","now","handleUploadForTask","query","taskId","materialTypeId","courseId","academicYear","semester","viewUploadedMaterial","materialId","window","open","then","catch","err"],"sources":["C:/Users/18083/Desktop/CCIT/TCRSystem/TCRSystem/frontend/src/views/teacher/Home.vue"],"sourcesContent":["<template>\n  <div class=\"teacher-home\">\n    <div class=\"welcome-section\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"16\">\n          <el-card class=\"welcome-card\" shadow=\"hover\">\n            <div class=\"welcome-content\">\n              <div class=\"welcome-text\">\n        <h2>欢迎回来，{{ userInfo?.realName || '老师' }}</h2>\n                <p class=\"subtitle\">今天是 {{ currentDate }}，祝您工作愉快！</p>\n                <p class=\"description\">您可以在这里上传教学材料并提交审核，查看审核进度和结果。</p>\n              </div>\n              <div class=\"welcome-image\">\n                <img src=\"https://img.icons8.com/color/240/000000/teacher.png\" alt=\"教师图标\">\n              </div>\n            </div>\n          </el-card>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-card class=\"quick-stats\" shadow=\"hover\">\n            <template #header>\n              <div class=\"card-header\">\n                <span>数据概览</span>\n              </div>\n            </template>\n            <div class=\"stats-content\">\n              <div class=\"stat-item\">\n                <div class=\"stat-icon upload\">\n                  <el-icon><Upload /></el-icon>\n                </div>\n                <div class=\"stat-info\">\n                  <div class=\"stat-value\">{{ uploadCount }}</div>\n                  <div class=\"stat-label\">已上传材料</div>\n                </div>\n              </div>\n              <div class=\"stat-item\">\n                <div class=\"stat-icon review\">\n                  <el-icon><Document /></el-icon>\n                </div>\n                <div class=\"stat-info\">\n                  <div class=\"stat-value\">{{ reviewCount }}</div>\n                  <div class=\"stat-label\">审核中材料</div>\n                </div>\n              </div>\n            </div>\n          </el-card>\n        </el-col>\n      </el-row>\n    </div>\n    \n    <div class=\"quick-actions\">\n      <el-row :gutter=\"20\">\n        <el-col :span=\"8\" v-for=\"(action, index) in quickActions\" :key=\"index\">\n          <el-card class=\"action-card\" shadow=\"hover\" @click=\"navigateTo(action.path)\">\n            <div class=\"action-content\">\n              <div class=\"action-icon\" :class=\"action.iconClass\">\n                <el-icon><component :is=\"action.icon\" /></el-icon>\n              </div>\n              <div class=\"action-text\">\n                <h3>{{ action.title }}</h3>\n                <p>{{ action.description }}</p>\n              </div>\n      </div>\n    </el-card>\n        </el-col>\n      </el-row>\n    </div>\n    \n    <div class=\"recent-section\">\n      <el-row :gutter=\"20\">\n      <el-col :span=\"12\">\n          <el-card shadow=\"hover\">\n          <template #header>\n            <div class=\"card-header\">\n                <span>最近上传的材料</span>\n                <el-button type=\"primary\" text @click=\"navigateTo('/teacher/material-upload')\">查看全部</el-button>\n            </div>\n          </template>\n            <div v-if=\"recentMaterials.length > 0\">\n              <el-table :data=\"recentMaterials\" style=\"width: 100%\">\n                <el-table-column prop=\"name\" label=\"材料名称\" width=\"180\"></el-table-column>\n                <el-table-column prop=\"course_name\" label=\"所属课程\"></el-table-column>\n                <el-table-column prop=\"create_time\" label=\"上传时间\" width=\"180\"></el-table-column>\n              </el-table>\n          </div>\n            <el-empty v-else description=\"暂无上传记录\"></el-empty>\n        </el-card>\n      </el-col>\n      <el-col :span=\"12\">\n          <el-card shadow=\"hover\">\n          <template #header>\n            <div class=\"card-header\">\n                <span>待审核的材料</span>\n                <el-button type=\"primary\" text @click=\"navigateTo('/teacher/material-review')\">查看全部</el-button>\n            </div>\n          </template>\n            <div v-if=\"pendingReviews.length > 0\">\n              <el-table :data=\"pendingReviews\" style=\"width: 100%\">\n                <el-table-column prop=\"material_name\" label=\"材料名称\" width=\"180\"></el-table-column>\n                <el-table-column prop=\"status\" label=\"状态\">\n                  <template #default=\"scope\">\n                    <el-tag :type=\"getStatusType(scope.row.status)\">{{ getStatusText(scope.row.status) }}</el-tag>\n                  </template>\n                </el-table-column>\n                <el-table-column prop=\"current_reviewer_name\" label=\"当前审核人\"></el-table-column>\n              </el-table>\n          </div>\n            <el-empty v-else description=\"暂无待审核材料\"></el-empty>\n        </el-card>\n      </el-col>\n    </el-row>\n    </div>\n    \n    <!-- 教学材料任务通知 -->\n    <div class=\"tasks-section\">\n      <el-card shadow=\"hover\">\n        <template #header>\n          <div class=\"card-header\">\n            <span>教学材料任务</span>\n            <el-badge :value=\"uncompletedTasksCount\" :hidden=\"uncompletedTasksCount === 0\" type=\"warning\">\n              <el-tag type=\"warning\" v-if=\"uncompletedTasksCount > 0\">有 {{ uncompletedTasksCount }} 个任务待完成</el-tag>\n            </el-badge>\n          </div>\n        </template>\n        <div v-if=\"materialTasks.length > 0\">\n          <el-table :data=\"materialTasks\" style=\"width: 100%\">\n            <el-table-column prop=\"title\" label=\"任务标题\" width=\"250\"></el-table-column>\n            <el-table-column prop=\"materialTypeName\" label=\"材料类型\" width=\"120\"></el-table-column>\n            <el-table-column prop=\"courseName\" label=\"课程\" width=\"180\"></el-table-column>\n            <el-table-column prop=\"deadline\" label=\"截止日期\" width=\"180\"></el-table-column>\n            <el-table-column label=\"状态\" width=\"100\">\n              <template #default=\"scope\">\n                <el-tag \n                  :type=\"scope.row.completed ? 'success' : (isTaskExpired(scope.row.deadline) ? 'danger' : 'warning')\"\n                >\n                  {{ scope.row.completed ? '已完成' : (isTaskExpired(scope.row.deadline) ? '已过期' : '未完成') }}\n                </el-tag>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"操作\">\n              <template #default=\"scope\">\n                <el-button \n                  v-if=\"!scope.row.completed\" \n                  type=\"primary\" \n                  size=\"small\" \n                  @click=\"handleUploadForTask(scope.row)\"\n                >\n                  上传材料\n                </el-button>\n                <el-button \n                  v-else \n                  type=\"success\" \n                  size=\"small\" \n                  @click=\"viewUploadedMaterial(scope.row.materialId)\"\n                >\n                  查看\n                </el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        <el-empty v-else description=\"暂无教学材料任务\"></el-empty>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport axios from 'axios'\nimport { Document, Upload } from '@element-plus/icons-vue'\nimport { ElMessage } from 'element-plus'\n\nconst store = useStore()\nconst router = useRouter()\nconst userInfo = computed(() => store.state.user)\n\n// 当前日期\nconst currentDate = computed(() => {\n  const date = new Date()\n  return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`\n})\n\n// 统计数据\nconst uploadCount = ref(0)\nconst reviewCount = ref(0)\n\n// 快捷操作\nconst quickActions = [\n  {\n    title: '上传材料',\n    description: '上传新的教学材料',\n    icon: 'Upload',\n    iconClass: 'upload-icon',\n    path: '/teacher/material-upload'\n  },\n  {\n    title: '材料审核',\n    description: '查看材料审核状态',\n    icon: 'Document',\n    iconClass: 'review-icon',\n    path: '/teacher/material-review'\n  },\n  {\n    title: '返回首页',\n    description: '回到教师首页',\n    icon: 'HomeFilled',\n    iconClass: 'home-icon',\n    path: '/teacher/home'\n  }\n]\n\n// 最近上传的材料\nconst recentMaterials = ref([])\n// 待审核的材料\nconst pendingReviews = ref([])\n\n// 教学材料任务相关\nconst materialTasks = ref([]);\nconst uncompletedTasksCount = ref(0);\n\n// 获取用户信息\nconst fetchUserInfo = async () => {\n  console.log('开始获取用户信息');\n  try {\n    // 从localStorage获取用户信息\n    const token = localStorage.getItem('token');\n    if (!token) {\n      console.error('用户未登录，请先登录');\n      ElMessage.warning('用户未登录，请先登录');\n      router.push('/login');\n      throw new Error('未登录');\n    }\n\n    // 如果store中已有用户信息，则不重复获取\n    if (userInfo.value && userInfo.value.id) {\n      console.log('从store获取到用户信息:', userInfo.value);\n      return userInfo.value;\n    }\n\n    // 从localStorage尝试获取\n    const localUserInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');\n    if (localUserInfo && localUserInfo.id) {\n      store.commit('SET_USER', localUserInfo);\n      console.log('从localStorage获取并设置用户信息:', localUserInfo);\n      return localUserInfo;\n    }\n\n    // 如果本地存储也没有，则从服务器获取\n    console.log('从服务器获取用户信息');\n    const response = await axios.get('/api/user/info');\n    if (response.data.code === 200 && response.data.data) {\n      store.commit('SET_USER', response.data.data);\n      localStorage.setItem('userInfo', JSON.stringify(response.data.data));\n      console.log('从服务器获取并设置用户信息成功:', response.data.data);\n      return response.data.data;\n    } else {\n      console.warn('获取用户信息失败:', response.data);\n      router.push('/login');\n      throw new Error('获取用户信息失败');\n    }\n  } catch (error) {\n    console.error('获取用户信息出错:', error);\n    router.push('/login');\n    throw error;\n  }\n};\n\n// 获取最近上传的材料\nconst fetchRecentMaterials = async () => {\n  try {\n    // 获取用户ID，首先从Vuex尝试获取\n    let teacherId = userInfo.value?.id;\n    \n    // 如果不存在，尝试从localStorage获取\n    if (!teacherId) {\n      console.warn('从Vuex未获取到教师ID，尝试从localStorage获取');\n      const localUserInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');\n      teacherId = localUserInfo.id;\n    }\n    \n    // 如果仍然无法获取ID，则退出\n    if (!teacherId) {\n      console.error('无法获取教师ID，请重新登录');\n      return;\n    }\n    \n    console.log('开始获取最近上传材料，教师ID:', teacherId);\n    \n    // 请求API\n    const response = await axios.get('/api/material/teacher', {\n      params: {\n        current: 1,\n        size: 5,\n        teacherId: teacherId,\n        type: 0 // 0表示上传的材料\n      }\n    });\n    \n    console.log('最近上传材料响应:', response.data);\n    \n    // 处理响应数据\n    if (response.data && response.data.code === 200 && response.data.data) {\n      recentMaterials.value = response.data.data.records || [];\n      uploadCount.value = response.data.data.total || 0;\n      console.log('已设置最近上传材料数据:', recentMaterials.value.length);\n      console.log('已设置上传总数:', uploadCount.value);\n    } else {\n      console.warn('获取最近上传材料返回异常:', response.data);\n      recentMaterials.value = [];\n      uploadCount.value = 0;\n    }\n  } catch (error) {\n    console.error('获取最近上传材料失败:', error);\n    recentMaterials.value = [];\n    uploadCount.value = 0;\n  }\n}\n\n// 获取待审核的材料\nconst fetchPendingReviews = async () => {\n  try {\n    // 获取用户ID，首先从Vuex尝试获取\n    let teacherId = userInfo.value?.id;\n    \n    // 如果不存在，尝试从localStorage获取\n    if (!teacherId) {\n      console.warn('从Vuex未获取到教师ID，尝试从localStorage获取');\n      const localUserInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');\n      teacherId = localUserInfo.id;\n    }\n    \n    // 如果仍然无法获取ID，则退出\n    if (!teacherId) {\n      console.error('无法获取教师ID，请重新登录');\n      return;\n    }\n    \n    console.log('开始获取待审核材料，教师ID:', teacherId);\n    \n    // 请求API\n    const response = await axios.get('/api/material-review/teacher-submit', {\n      params: {\n        current: 1,\n        size: 5,\n        teacherId: teacherId\n        // 不指定status，获取所有状态的审核\n      }\n    });\n    \n    console.log('待审核材料响应:', response.data);\n    \n    // 处理响应数据\n    if (response.data && response.data.code === 200 && response.data.data) {\n      pendingReviews.value = response.data.data.records || [];\n      console.log('已设置待审核材料数据:', pendingReviews.value.length);\n      \n      // 计算审核中的材料数量 - 状态为1,2,3,4的表示审核中\n      const inReviewCount = pendingReviews.value.filter(item => \n        item.status === 1 || item.status === 2 || \n        item.status === 3 || item.status === 4\n      ).length;\n      \n      reviewCount.value = inReviewCount;\n      console.log('已设置审核中数量:', reviewCount.value);\n    } else {\n      console.warn('获取待审核材料返回异常:', response.data);\n      pendingReviews.value = [];\n      reviewCount.value = 0;\n    }\n  } catch (error) {\n    console.error('获取待审核材料失败:', error);\n    pendingReviews.value = [];\n    reviewCount.value = 0;\n  }\n}\n\n// 状态相关工具函数\nconst getStatusText = (status) => {\n  switch (status) {\n    case 0: return '待审核'\n    case 1: return '课程负责人审核中'\n    case 2: return '专业负责人审核中'\n    case 3: return '副院长审核中'\n    case 4: return '教务人员审核中'\n    case 5: return '审核通过'\n    case 6: return '审核不通过'\n    default: return '未知状态'\n  }\n}\n\nconst getStatusType = (status) => {\n  switch (status) {\n    case 0: return 'info'\n    case 1: case 2: case 3: case 4: return 'warning'\n    case 5: return 'success'\n    case 6: return 'danger'\n    default: return 'info'\n  }\n}\n\n// 页面跳转\nconst navigateTo = (path) => {\n  router.push(path)\n}\n\n// 获取教学材料任务\nconst fetchMaterialTasks = async () => {\n  console.log('======= 开始执行fetchMaterialTasks函数 =======', new Date().toISOString());\n  try {\n    // 获取用户ID\n    let teacherId = userInfo.value?.id;\n    \n    // 如果Vuex中没有，尝试从localStorage获取\n    if (!teacherId) {\n      console.warn('从Vuex未获取到教师ID，尝试从localStorage获取');\n      const localUserInfo = JSON.parse(localStorage.getItem('userInfo') || '{}');\n      teacherId = localUserInfo.id;\n    }\n    \n    if (!teacherId) {\n      console.error('无法获取教师ID，未加载用户信息');\n      throw new Error('无法获取教师ID');\n    }\n\n    console.log('开始获取教师任务列表，教师ID:', teacherId);\n    console.log('请求URL:', '/api/material-task/teacher/tasks');\n    \n    // 构造请求配置，确保请求头和参数正确\n    const config = {\n      url: '/api/material-task/teacher/tasks',\n      method: 'get',\n      params: { teacherId },\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\n        'Content-Type': 'application/json'\n      }\n    };\n    \n    console.log('请求配置:', JSON.stringify(config));\n    \n    // 发起请求\n    console.log('正在发送请求...');\n    const response = await axios(config);\n    \n    console.log('接收到教师任务列表响应:', response.status);\n    console.log('响应数据:', JSON.stringify(response.data));\n\n    if (response.data.code === 200) {\n      materialTasks.value = response.data.data || [];\n      console.log('成功获取任务列表，数量:', materialTasks.value.length);\n      \n      if (materialTasks.value.length > 0) {\n        console.log('任务列表第一项:', JSON.stringify(materialTasks.value[0]));\n      } else {\n        console.warn('任务列表为空');\n      }\n      \n      // 计算未完成任务数量\n      uncompletedTasksCount.value = materialTasks.value.filter(task => !task.completed).length;\n      console.log('未完成任务数量:', uncompletedTasksCount.value);\n    } else {\n      console.error('获取教师任务列表失败:', response.data.message);\n      materialTasks.value = [];\n      uncompletedTasksCount.value = 0;\n    }\n  } catch (error) {\n    console.error('获取教学材料任务失败:', error);\n    console.error('错误详情:', error.response || error.message || error);\n    materialTasks.value = [];\n    uncompletedTasksCount.value = 0;\n    ElMessage.error('获取任务列表失败: ' + (error.message || '未知错误'));\n  } finally {\n    console.log('======= fetchMaterialTasks函数执行结束 =======');\n  }\n};\n\n// 判断任务是否过期\nconst isTaskExpired = (deadline) => {\n  if (!deadline) return false;\n  const deadlineDate = new Date(deadline);\n  const now = new Date();\n  return deadlineDate < now;\n};\n\n// 处理为任务上传材料\nconst handleUploadForTask = (task) => {\n  // 跳转到材料上传页面并传递任务参数\n  router.push({\n    path: '/teacher/material-upload',\n    query: {\n      taskId: task.id,\n      materialTypeId: task.materialTypeId,\n      courseId: task.courseId,\n      academicYear: task.academicYear,\n      semester: task.semester\n    }\n  });\n};\n\n// 查看已上传的材料\nconst viewUploadedMaterial = (materialId) => {\n  if (!materialId) return;\n  window.open(`/api/material/download/${materialId}`, '_blank');\n};\n\n// 在组件挂载时获取数据\nonMounted(() => {\n  console.log('====== 教师首页组件挂载 ======');\n  \n  // 先获取用户信息\n  fetchUserInfo().then(() => {\n    console.log('用户信息获取完成，开始获取任务数据');\n    // 依次调用其他数据获取函数\n    fetchRecentMaterials();\n    fetchPendingReviews();\n    \n    // 确保在获取用户信息后调用任务获取\n    console.log('准备调用fetchMaterialTasks函数');\n    fetchMaterialTasks();\n  }).catch(err => {\n    console.error('获取用户信息失败，无法继续获取任务:', err);\n  });\n  \n  // 取消自动更新，避免干扰调试\n  // setInterval(() => {\n  //   fetchMaterialTasks();\n  // }, 300000); // 5分钟更新一次任务数据\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.teacher-home {\n  .welcome-section {\n    margin-bottom: 20px;\n    \n    .welcome-card {\n      height: 100%;\n      \n      .welcome-content {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        \n        .welcome-text {\n          flex: 1;\n          \n          h2 {\n            margin-top: 0;\n            margin-bottom: 10px;\n            color: #303133;\n            font-size: 24px;\n          }\n          \n          .subtitle {\n            color: #606266;\n            font-size: 16px;\n            margin-bottom: 15px;\n          }\n          \n          .description {\n            color: #909399;\n            font-size: 14px;\n            line-height: 1.6;\n          }\n        }\n        \n        .welcome-image {\n          margin-left: 20px;\n          \n          img {\n            width: 120px;\n            height: 120px;\n          }\n        }\n      }\n    }\n    \n    .quick-stats {\n      height: 100%;\n      \n      .stats-content {\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n        \n        .stat-item {\n          display: flex;\n          align-items: center;\n          \n          .stat-icon {\n            width: 50px;\n            height: 50px;\n            border-radius: 10px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            margin-right: 15px;\n            \n            .el-icon {\n              font-size: 24px;\n              color: white;\n            }\n            \n            &.upload {\n              background-color: #67c23a;\n            }\n            \n            &.review {\n              background-color: #e6a23c;\n            }\n          }\n          \n          .stat-info {\n            .stat-value {\n              font-size: 24px;\n              font-weight: bold;\n              color: #303133;\n              line-height: 1;\n              margin-bottom: 5px;\n            }\n            \n            .stat-label {\n              font-size: 14px;\n              color: #909399;\n            }\n          }\n        }\n      }\n    }\n  }\n  \n  .quick-actions {\n    margin-bottom: 20px;\n    \n    .action-card {\n      cursor: pointer;\n      transition: all 0.3s;\n      \n      &:hover {\n        transform: translateY(-5px);\n        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);\n      }\n      \n      .action-content {\n        display: flex;\n        align-items: center;\n        padding: 10px 0;\n        \n        .action-icon {\n          width: 60px;\n          height: 60px;\n          border-radius: 50%;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          margin-right: 15px;\n          \n          .el-icon {\n            font-size: 30px;\n            color: white;\n          }\n          \n          &.upload-icon {\n            background-color: #409eff;\n          }\n          \n          &.review-icon {\n            background-color: #e6a23c;\n          }\n          \n          &.home-icon {\n            background-color: #67c23a;\n          }\n        }\n        \n        .action-text {\n          h3 {\n            margin: 0 0 5px 0;\n            font-size: 18px;\n            color: #303133;\n      }\n      \n      p {\n        margin: 0;\n            font-size: 14px;\n            color: #909399;\n          }\n        }\n      }\n    }\n  }\n  \n  .recent-section {\n  .card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}