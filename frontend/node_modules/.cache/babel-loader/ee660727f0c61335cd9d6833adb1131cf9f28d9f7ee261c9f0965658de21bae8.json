{"ast":null,"code":"import { computed } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport axios from 'axios';\nimport { HomeFilled, User, Reading, Document, ArrowDown, School } from '@element-plus/icons-vue';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'AdminLayout',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const route = useRoute();\n    const store = useStore();\n    const username = computed(() => store.state.user?.username || '管理员');\n    const activeMenu = computed(() => route.path);\n    const handleCommand = async command => {\n      if (command === 'profile') {\n        // 跳转到个人信息页面\n        router.push('/profile');\n      } else if (command === 'logout') {\n        try {\n          // 发送退出登录请求\n          await axios.post('/api/user/logout', null, {\n            headers: {\n              Authorization: localStorage.getItem('token')\n            }\n          });\n\n          // 清除本地存储的用户信息和token\n          localStorage.removeItem('token');\n          localStorage.removeItem('userInfo');\n          ElMessage.success('退出成功');\n          router.push('/login');\n        } catch (error) {\n          console.error('退出失败:', error);\n\n          // 即使请求失败，也清除本地存储并跳转到登录页\n          localStorage.removeItem('token');\n          localStorage.removeItem('userInfo');\n          router.push('/login');\n        }\n      }\n    };\n    const __returned__ = {\n      router,\n      route,\n      store,\n      username,\n      activeMenu,\n      handleCommand,\n      computed,\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get axios() {\n        return axios;\n      },\n      get HomeFilled() {\n        return HomeFilled;\n      },\n      get User() {\n        return User;\n      },\n      get Reading() {\n        return Reading;\n      },\n      get Document() {\n        return Document;\n      },\n      get ArrowDown() {\n        return ArrowDown;\n      },\n      get School() {\n        return School;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","useRouter","useRoute","ElMessage","axios","HomeFilled","User","Reading","Document","ArrowDown","School","useStore","router","route","store","username","state","user","activeMenu","path","handleCommand","command","push","post","headers","Authorization","localStorage","getItem","removeItem","success","error","console"],"sources":["C:/Users/18083/Desktop/CCIT/TCRSystem/TCRSystem/frontend/src/layouts/AdminLayout.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\r\n<template>\r\n  <el-container class=\"layout-container\">\r\n    <el-aside width=\"200px\">\r\n      <el-menu\r\n        :router=\"true\"\r\n        :default-active=\"activeMenu\"\r\n        class=\"el-menu-vertical\"\r\n        background-color=\"#304156\"\r\n        text-color=\"#bfcbd9\"\r\n        active-text-color=\"#409EFF\"\r\n      >\r\n        <div class=\"logo-container\">\r\n          <h1 class=\"logo-text\">管理员端</h1>\r\n        </div>\r\n        <el-menu-item index=\"/admin/home\">\r\n          <el-icon><HomeFilled /></el-icon>\r\n          <span>首页</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/admin/users\">\r\n          <el-icon><User /></el-icon>\r\n          <span>用户管理</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/admin/courses\">\r\n          <el-icon><Reading /></el-icon>\r\n          <span>课程管理</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/admin/material-review\">\r\n          <el-icon><Document /></el-icon>\r\n          <span>材料审核</span>\r\n        </el-menu-item>\r\n        <el-menu-item index=\"/admin/educational-admin\">\r\n          <el-icon><School /></el-icon>\r\n          <span>教务管理</span>\r\n        </el-menu-item>\r\n      </el-menu>\r\n    </el-aside>\r\n    <el-container>\r\n      <el-header>\r\n        <div class=\"header-right\">\r\n          <el-dropdown @command=\"handleCommand\">\r\n            <span class=\"el-dropdown-link\">\r\n              {{ username }}\r\n              <el-icon class=\"el-icon--right\"><ArrowDown /></el-icon>\r\n            </span>\r\n            <template #dropdown>\r\n              <el-dropdown-menu>\r\n                <el-dropdown-item command=\"profile\">个人信息</el-dropdown-item>\r\n                <el-dropdown-item command=\"logout\">退出登录</el-dropdown-item>\r\n              </el-dropdown-menu>\r\n            </template>\r\n          </el-dropdown>\r\n        </div>\r\n      </el-header>\r\n      <el-main>\r\n        <router-view />\r\n      </el-main>\r\n    </el-container>\r\n  </el-container>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed } from 'vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport axios from 'axios'\r\nimport { HomeFilled, User, Reading, Document, ArrowDown, School } from '@element-plus/icons-vue'\r\nimport { useStore } from 'vuex'\r\n\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nconst store = useStore()\r\n\r\nconst username = computed(() => store.state.user?.username || '管理员')\r\nconst activeMenu = computed(() => route.path)\r\n\r\nconst handleCommand = async (command) => {\r\n  if (command === 'profile') {\r\n    // 跳转到个人信息页面\r\n    router.push('/profile')\r\n  } else if (command === 'logout') {\r\n    try {\r\n      // 发送退出登录请求\r\n      await axios.post('/api/user/logout', null, {\r\n        headers: { Authorization: localStorage.getItem('token') }\r\n      })\r\n      \r\n      // 清除本地存储的用户信息和token\r\n      localStorage.removeItem('token')\r\n      localStorage.removeItem('userInfo')\r\n      \r\n      ElMessage.success('退出成功')\r\n      router.push('/login')\r\n    } catch (error) {\r\n      console.error('退出失败:', error)\r\n      \r\n      // 即使请求失败，也清除本地存储并跳转到登录页\r\n      localStorage.removeItem('token')\r\n      localStorage.removeItem('userInfo')\r\n      router.push('/login')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.layout-container {\r\n  height: 100vh;\r\n\r\n  .el-aside {\r\n    background-color: #304156;\r\n    \r\n    .logo-container {\r\n      height: 60px;\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      \r\n      .logo-text {\r\n        color: #fff;\r\n        font-size: 18px;\r\n        margin: 0;\r\n      }\r\n    }\r\n    \r\n    .el-menu {\r\n      border-right: none;\r\n    }\r\n  }\r\n\r\n  .el-header {\r\n    background-color: #fff;\r\n    border-bottom: 1px solid #dcdfe6;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n    padding: 0 20px;\r\n\r\n    .header-right {\r\n      .el-dropdown-link {\r\n        cursor: pointer;\r\n        color: #409eff;\r\n      }\r\n    }\r\n  }\r\n\r\n  .el-main {\r\n    background-color: #f0f2f5;\r\n    padding: 20px;\r\n  }\r\n}\r\n</style> "],"mappings":"AA8DA,SAASA,QAAQ,QAAQ,KAAK;AAC9B,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAY;AAChD,SAASC,SAAS,QAAQ,cAAc;AACxC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,EAAEC,IAAI,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,yBAAyB;AAChG,SAASC,QAAQ,QAAQ,MAAM;;;;;;;IAE/B,MAAMC,MAAM,GAAGX,SAAS,CAAC,CAAC;IAC1B,MAAMY,KAAK,GAAGX,QAAQ,CAAC,CAAC;IACxB,MAAMY,KAAK,GAAGH,QAAQ,CAAC,CAAC;IAExB,MAAMI,QAAQ,GAAGf,QAAQ,CAAC,MAAMc,KAAK,CAACE,KAAK,CAACC,IAAI,EAAEF,QAAQ,IAAI,KAAK,CAAC;IACpE,MAAMG,UAAU,GAAGlB,QAAQ,CAAC,MAAMa,KAAK,CAACM,IAAI,CAAC;IAE7C,MAAMC,aAAa,GAAG,MAAOC,OAAO,IAAK;MACvC,IAAIA,OAAO,KAAK,SAAS,EAAE;QACzB;QACAT,MAAM,CAACU,IAAI,CAAC,UAAU,CAAC;MACzB,CAAC,MAAM,IAAID,OAAO,KAAK,QAAQ,EAAE;QAC/B,IAAI;UACF;UACA,MAAMjB,KAAK,CAACmB,IAAI,CAAC,kBAAkB,EAAE,IAAI,EAAE;YACzCC,OAAO,EAAE;cAAEC,aAAa,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO;YAAE;UAC1D,CAAC,CAAC;;UAEF;UACAD,YAAY,CAACE,UAAU,CAAC,OAAO,CAAC;UAChCF,YAAY,CAACE,UAAU,CAAC,UAAU,CAAC;UAEnCzB,SAAS,CAAC0B,OAAO,CAAC,MAAM,CAAC;UACzBjB,MAAM,CAACU,IAAI,CAAC,QAAQ,CAAC;QACvB,CAAC,CAAC,OAAOQ,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;;UAE7B;UACAJ,YAAY,CAACE,UAAU,CAAC,OAAO,CAAC;UAChCF,YAAY,CAACE,UAAU,CAAC,UAAU,CAAC;UACnChB,MAAM,CAACU,IAAI,CAAC,QAAQ,CAAC;QACvB;MACF;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}