{"ast":null,"code":"import { login, logout, getUserInfo } from '@/api/user';\nconst state = {\n  token: localStorage.getItem('token'),\n  userInfo: null\n};\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token;\n  },\n  SET_USER_INFO: (state, userInfo) => {\n    state.userInfo = userInfo;\n  }\n};\nconst actions = {\n  // 用户登录\n  login({\n    commit\n  }, userInfo) {\n    const {\n      username,\n      password\n    } = userInfo;\n    return new Promise((resolve, reject) => {\n      login({\n        username: username.trim(),\n        password: password\n      }).then(response => {\n        const {\n          data\n        } = response;\n        commit('SET_TOKEN', data.token);\n        commit('SET_USER_INFO', data);\n        localStorage.setItem('token', data.token);\n        resolve(data);\n      }).catch(error => {\n        reject(error);\n      });\n    });\n  },\n  // 获取用户信息\n  getUserInfo({\n    commit\n  }) {\n    return new Promise((resolve, reject) => {\n      getUserInfo().then(response => {\n        const {\n          data\n        } = response;\n        commit('SET_USER_INFO', data);\n        resolve(data);\n      }).catch(error => {\n        reject(error);\n      });\n    });\n  },\n  // 退出登录\n  logout({\n    commit\n  }) {\n    return new Promise((resolve, reject) => {\n      logout().then(() => {\n        commit('SET_TOKEN', '');\n        commit('SET_USER_INFO', null);\n        localStorage.removeItem('token');\n        resolve();\n      }).catch(error => {\n        reject(error);\n      });\n    });\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n};","map":{"version":3,"names":["login","logout","getUserInfo","state","token","localStorage","getItem","userInfo","mutations","SET_TOKEN","SET_USER_INFO","actions","commit","username","password","Promise","resolve","reject","trim","then","response","data","setItem","catch","error","removeItem","namespaced"],"sources":["C:/Users/18083/Desktop/CCIT/TCRSystem/TCRSystem/frontend/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getUserInfo } from '@/api/user'\r\n\r\nconst state = {\r\n  token: localStorage.getItem('token'),\r\n  userInfo: null\r\n}\r\n\r\nconst mutations = {\r\n  SET_TOKEN: (state, token) => {\r\n    state.token = token\r\n  },\r\n  SET_USER_INFO: (state, userInfo) => {\r\n    state.userInfo = userInfo\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 用户登录\r\n  login({ commit }, userInfo) {\r\n    const { username, password } = userInfo\r\n    return new Promise((resolve, reject) => {\r\n      login({ username: username.trim(), password: password })\r\n        .then(response => {\r\n          const { data } = response\r\n          commit('SET_TOKEN', data.token)\r\n          commit('SET_USER_INFO', data)\r\n          localStorage.setItem('token', data.token)\r\n          resolve(data)\r\n        })\r\n        .catch(error => {\r\n          reject(error)\r\n        })\r\n    })\r\n  },\r\n\r\n  // 获取用户信息\r\n  getUserInfo({ commit }) {\r\n    return new Promise((resolve, reject) => {\r\n      getUserInfo()\r\n        .then(response => {\r\n          const { data } = response\r\n          commit('SET_USER_INFO', data)\r\n          resolve(data)\r\n        })\r\n        .catch(error => {\r\n          reject(error)\r\n        })\r\n    })\r\n  },\r\n\r\n  // 退出登录\r\n  logout({ commit }) {\r\n    return new Promise((resolve, reject) => {\r\n      logout()\r\n        .then(() => {\r\n          commit('SET_TOKEN', '')\r\n          commit('SET_USER_INFO', null)\r\n          localStorage.removeItem('token')\r\n          resolve()\r\n        })\r\n        .catch(error => {\r\n          reject(error)\r\n        })\r\n    })\r\n  }\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions\r\n} "],"mappings":"AAAA,SAASA,KAAK,EAAEC,MAAM,EAAEC,WAAW,QAAQ,YAAY;AAEvD,MAAMC,KAAK,GAAG;EACZC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACpCC,QAAQ,EAAE;AACZ,CAAC;AAED,MAAMC,SAAS,GAAG;EAChBC,SAAS,EAAEA,CAACN,KAAK,EAAEC,KAAK,KAAK;IAC3BD,KAAK,CAACC,KAAK,GAAGA,KAAK;EACrB,CAAC;EACDM,aAAa,EAAEA,CAACP,KAAK,EAAEI,QAAQ,KAAK;IAClCJ,KAAK,CAACI,QAAQ,GAAGA,QAAQ;EAC3B;AACF,CAAC;AAED,MAAMI,OAAO,GAAG;EACd;EACAX,KAAKA,CAAC;IAAEY;EAAO,CAAC,EAAEL,QAAQ,EAAE;IAC1B,MAAM;MAAEM,QAAQ;MAAEC;IAAS,CAAC,GAAGP,QAAQ;IACvC,OAAO,IAAIQ,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtCjB,KAAK,CAAC;QAAEa,QAAQ,EAAEA,QAAQ,CAACK,IAAI,CAAC,CAAC;QAAEJ,QAAQ,EAAEA;MAAS,CAAC,CAAC,CACrDK,IAAI,CAACC,QAAQ,IAAI;QAChB,MAAM;UAAEC;QAAK,CAAC,GAAGD,QAAQ;QACzBR,MAAM,CAAC,WAAW,EAAES,IAAI,CAACjB,KAAK,CAAC;QAC/BQ,MAAM,CAAC,eAAe,EAAES,IAAI,CAAC;QAC7BhB,YAAY,CAACiB,OAAO,CAAC,OAAO,EAAED,IAAI,CAACjB,KAAK,CAAC;QACzCY,OAAO,CAACK,IAAI,CAAC;MACf,CAAC,CAAC,CACDE,KAAK,CAACC,KAAK,IAAI;QACdP,MAAM,CAACO,KAAK,CAAC;MACf,CAAC,CAAC;IACN,CAAC,CAAC;EACJ,CAAC;EAED;EACAtB,WAAWA,CAAC;IAAEU;EAAO,CAAC,EAAE;IACtB,OAAO,IAAIG,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtCf,WAAW,CAAC,CAAC,CACViB,IAAI,CAACC,QAAQ,IAAI;QAChB,MAAM;UAAEC;QAAK,CAAC,GAAGD,QAAQ;QACzBR,MAAM,CAAC,eAAe,EAAES,IAAI,CAAC;QAC7BL,OAAO,CAACK,IAAI,CAAC;MACf,CAAC,CAAC,CACDE,KAAK,CAACC,KAAK,IAAI;QACdP,MAAM,CAACO,KAAK,CAAC;MACf,CAAC,CAAC;IACN,CAAC,CAAC;EACJ,CAAC;EAED;EACAvB,MAAMA,CAAC;IAAEW;EAAO,CAAC,EAAE;IACjB,OAAO,IAAIG,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtChB,MAAM,CAAC,CAAC,CACLkB,IAAI,CAAC,MAAM;QACVP,MAAM,CAAC,WAAW,EAAE,EAAE,CAAC;QACvBA,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC;QAC7BP,YAAY,CAACoB,UAAU,CAAC,OAAO,CAAC;QAChCT,OAAO,CAAC,CAAC;MACX,CAAC,CAAC,CACDO,KAAK,CAACC,KAAK,IAAI;QACdP,MAAM,CAACO,KAAK,CAAC;MACf,CAAC,CAAC;IACN,CAAC,CAAC;EACJ;AACF,CAAC;AAED,eAAe;EACbE,UAAU,EAAE,IAAI;EAChBvB,KAAK;EACLK,SAAS;EACTG;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}