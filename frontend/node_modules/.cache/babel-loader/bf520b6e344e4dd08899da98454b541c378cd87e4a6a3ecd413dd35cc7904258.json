{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"student-home\"\n};\nconst _hoisted_2 = {\n  class: \"welcome-message\"\n};\nconst _hoisted_3 = {\n  class: \"card-header\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"empty-block\"\n};\nconst _hoisted_5 = {\n  key: 1,\n  class: \"table-container\"\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"loading-placeholder\"\n};\nconst _hoisted_7 = {\n  class: \"card-header\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"empty-block\"\n};\nconst _hoisted_9 = {\n  key: 1,\n  class: \"table-container\"\n};\nconst _hoisted_10 = {\n  key: 1,\n  class: \"loading-placeholder\"\n};\nconst _hoisted_11 = {\n  class: \"card-header\"\n};\nconst _hoisted_12 = {\n  key: 0,\n  class: \"empty-block\"\n};\nconst _hoisted_13 = {\n  key: 1,\n  class: \"table-container\"\n};\nconst _hoisted_14 = {\n  key: 1,\n  class: \"loading-placeholder\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[12] || (_cache[12] = _createElementVNode(\"h1\", null, \"学生首页\", -1 /* HOISTED */)), _createVNode(_component_el_card, {\n    class: \"welcome-card\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h2\", null, \"欢迎回来，\" + _toDisplayString($setup.userInfo?.realName || '同学'), 1 /* TEXT */), _cache[0] || (_cache[0] = _createElementVNode(\"p\", null, \"您可以在这里查看您的课程、学习资料和提交反馈。\", -1 /* HOISTED */))])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_row, {\n    gutter: 20,\n    class: \"mt-20\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_col, {\n      span: 12\n    }, {\n      default: _withCtx(() => [_withDirectives((_openBlock(), _createBlock(_component_el_card, null, {\n        header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_cache[2] || (_cache[2] = _createElementVNode(\"span\", null, \"我的课程\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n          type: \"text\",\n          onClick: $setup.goToCourses\n        }, {\n          default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"查看全部\")])),\n          _: 1 /* STABLE */\n        })])]),\n        default: _withCtx(() => [$setup.recentCourses.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createVNode(_component_el_empty, {\n          description: \"暂无课程数据\"\n        })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [$setup.showCoursesTable ? (_openBlock(), _createBlock(_component_el_table, {\n          key: 0,\n          data: $setup.recentCourses,\n          style: {\n            \"width\": \"100%\"\n          },\n          height: $setup.tableHeight,\n          \"show-header\": true,\n          \"highlight-current-row\": false\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_table_column, {\n            prop: \"name\",\n            label: \"课程名称\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"teacherName\",\n            label: \"教师\",\n            width: \"120\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"classTime\",\n            label: \"上课时间\",\n            width: \"130\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"classLocation\",\n            label: \"上课地点\",\n            width: \"130\"\n          }), _createVNode(_component_el_table_column, {\n            label: \"状态\",\n            width: \"100\"\n          }, {\n            default: _withCtx(scope => [_createVNode(_component_el_tag, {\n              type: $setup.getStatusTag(scope.row.status)\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.getStatusLabel(scope.row.status)), 1 /* TEXT */)]),\n              _: 2 /* DYNAMIC */\n            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_table_column, {\n            label: \"操作\",\n            width: \"100\"\n          }, {\n            default: _withCtx(scope => [_createVNode(_component_el_button, {\n              type: \"primary\",\n              size: \"small\",\n              onClick: $event => $setup.viewMaterials(scope.row.id)\n            }, {\n              default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\" 查看资料 \")])),\n              _: 2 /* DYNAMIC */\n            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"data\"])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6))]))]),\n        _: 1 /* STABLE */\n      })), [[_directive_loading, $setup.coursesLoading]])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_col, {\n      span: 12\n    }, {\n      default: _withCtx(() => [_withDirectives((_openBlock(), _createBlock(_component_el_card, null, {\n        header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_7, [_cache[5] || (_cache[5] = _createElementVNode(\"span\", null, \"最新资料\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n          type: \"text\",\n          onClick: $setup.goToMaterials\n        }, {\n          default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"查看全部\")])),\n          _: 1 /* STABLE */\n        })])]),\n        default: _withCtx(() => [$setup.recentMaterials.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createVNode(_component_el_empty, {\n          description: \"暂无资料数据\"\n        })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [$setup.showMaterialsTable ? (_openBlock(), _createBlock(_component_el_table, {\n          key: 0,\n          data: $setup.recentMaterials,\n          style: {\n            \"width\": \"100%\"\n          },\n          height: $setup.tableHeight,\n          \"show-header\": true,\n          \"highlight-current-row\": false\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_table_column, {\n            prop: \"name\",\n            label: \"资料名称\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"courseName\",\n            label: \"所属课程\",\n            width: \"120\"\n          }), _createVNode(_component_el_table_column, {\n            label: \"上传时间\",\n            width: \"180\"\n          }, {\n            default: _withCtx(scope => [_createTextVNode(_toDisplayString($setup.formatDate(scope.row.createTime)), 1 /* TEXT */)]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_table_column, {\n            label: \"操作\",\n            width: \"100\"\n          }, {\n            default: _withCtx(scope => [_createVNode(_component_el_button, {\n              type: \"primary\",\n              size: \"small\",\n              onClick: $event => $setup.downloadMaterial(scope.row)\n            }, {\n              default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\" 下载 \")])),\n              _: 2 /* DYNAMIC */\n            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"data\"])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10))]))]),\n        _: 1 /* STABLE */\n      })), [[_directive_loading, $setup.materialsLoading]])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_row, {\n    class: \"mt-20\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_col, {\n      span: 24\n    }, {\n      default: _withCtx(() => [_withDirectives((_openBlock(), _createBlock(_component_el_card, null, {\n        header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_11, [_cache[8] || (_cache[8] = _createElementVNode(\"span\", null, \"待完成作业\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n          type: \"text\",\n          onClick: $setup.goToAssignments\n        }, {\n          default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"查看全部\")])),\n          _: 1 /* STABLE */\n        })])]),\n        default: _withCtx(() => [$setup.recentAssignments.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createVNode(_component_el_empty, {\n          description: \"暂无待完成作业\"\n        })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [$setup.showAssignmentsTable ? (_openBlock(), _createBlock(_component_el_table, {\n          key: 0,\n          data: $setup.recentAssignments,\n          style: {\n            \"width\": \"100%\"\n          },\n          height: $setup.tableHeight,\n          \"show-header\": true,\n          \"highlight-current-row\": false\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_table_column, {\n            prop: \"title\",\n            label: \"作业标题\",\n            \"min-width\": \"180\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"courseName\",\n            label: \"所属课程\",\n            width: \"150\"\n          }), _createVNode(_component_el_table_column, {\n            label: \"截止日期\",\n            width: \"180\"\n          }, {\n            default: _withCtx(scope => [_createTextVNode(_toDisplayString($setup.formatDate(scope.row.deadline)), 1 /* TEXT */)]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_table_column, {\n            label: \"状态\",\n            width: \"100\"\n          }, {\n            default: _withCtx(scope => [_createVNode(_component_el_tag, {\n              type: $setup.getStatusTag(scope.row.status)\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.getStatusLabel(scope.row.status)), 1 /* TEXT */)]),\n              _: 2 /* DYNAMIC */\n            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_table_column, {\n            label: \"提交状态\",\n            width: \"100\"\n          }, {\n            default: _withCtx(scope => [scope.row.submitted ? (_openBlock(), _createBlock(_component_el_tag, {\n              key: 0,\n              type: \"success\"\n            }, {\n              default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"已提交\")])),\n              _: 1 /* STABLE */\n            })) : (_openBlock(), _createBlock(_component_el_tag, {\n              key: 1,\n              type: \"danger\"\n            }, {\n              default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"未提交\")])),\n              _: 1 /* STABLE */\n            }))]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_table_column, {\n            label: \"操作\",\n            width: \"120\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_button, {\n              type: \"success\",\n              size: \"small\",\n              onClick: $setup.goToAssignments\n            }, {\n              default: _withCtx(() => _cache[11] || (_cache[11] = [_createTextVNode(\" 查看 \")])),\n              _: 1 /* STABLE */\n            })]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"data\"])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_14))]))]),\n        _: 1 /* STABLE */\n      })), [[_directive_loading, $setup.assignmentsLoading]])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_card","default","_withCtx","_hoisted_2","_toDisplayString","$setup","userInfo","realName","_","_component_el_row","gutter","_component_el_col","span","_createBlock","header","_hoisted_3","_component_el_button","type","onClick","goToCourses","_cache","_createTextVNode","recentCourses","length","_hoisted_4","_component_el_empty","description","_hoisted_5","showCoursesTable","_component_el_table","data","style","height","tableHeight","_component_el_table_column","prop","label","width","scope","_component_el_tag","getStatusTag","row","status","getStatusLabel","size","$event","viewMaterials","id","_hoisted_6","coursesLoading","_hoisted_7","goToMaterials","recentMaterials","_hoisted_8","_hoisted_9","showMaterialsTable","formatDate","createTime","downloadMaterial","_hoisted_10","materialsLoading","_hoisted_11","goToAssignments","recentAssignments","_hoisted_12","_hoisted_13","showAssignmentsTable","deadline","submitted","_hoisted_14","assignmentsLoading"],"sources":["C:\\Users\\18083\\Desktop\\CCIT\\TCRSystem\\TCRSystem\\frontend\\src\\views\\student\\Home.vue"],"sourcesContent":["<template>\n  <div class=\"student-home\">\n    <h1>学生首页</h1>\n    <el-card class=\"welcome-card\">\n      <div class=\"welcome-message\">\n        <h2>欢迎回来，{{ userInfo?.realName || '同学' }}</h2>\n        <p>您可以在这里查看您的课程、学习资料和提交反馈。</p>\n      </div>\n    </el-card>\n    \n    <el-row :gutter=\"20\" class=\"mt-20\">\n      <el-col :span=\"12\">\n        <el-card v-loading=\"coursesLoading\">\n          <template #header>\n            <div class=\"card-header\">\n              <span>我的课程</span>\n              <el-button type=\"text\" @click=\"goToCourses\">查看全部</el-button>\n            </div>\n          </template>\n          <div class=\"empty-block\" v-if=\"recentCourses.length === 0\">\n            <el-empty description=\"暂无课程数据\"></el-empty>\n          </div>\n          <div v-else class=\"table-container\">\n            <el-table \n              v-if=\"showCoursesTable\"\n              :data=\"recentCourses\" \n              style=\"width: 100%\"\n              :height=\"tableHeight\"\n              :show-header=\"true\"\n              :highlight-current-row=\"false\"\n            >\n              <el-table-column prop=\"name\" label=\"课程名称\" />\n              <el-table-column prop=\"teacherName\" label=\"教师\" width=\"120\" />\n              <el-table-column prop=\"classTime\" label=\"上课时间\" width=\"130\" />\n              <el-table-column prop=\"classLocation\" label=\"上课地点\" width=\"130\" />\n              <el-table-column label=\"状态\" width=\"100\">\n                <template #default=\"scope\">\n                  <el-tag :type=\"getStatusTag(scope.row.status)\">\n                    {{ getStatusLabel(scope.row.status) }}\n                  </el-tag>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"操作\" width=\"100\">\n                <template #default=\"scope\">\n                  <el-button type=\"primary\" size=\"small\" @click=\"viewMaterials(scope.row.id)\">\n                    查看资料\n                  </el-button>\n                </template>\n              </el-table-column>\n            </el-table>\n            <div v-else class=\"loading-placeholder\"></div>\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-card v-loading=\"materialsLoading\">\n          <template #header>\n            <div class=\"card-header\">\n              <span>最新资料</span>\n              <el-button type=\"text\" @click=\"goToMaterials\">查看全部</el-button>\n            </div>\n          </template>\n          <div class=\"empty-block\" v-if=\"recentMaterials.length === 0\">\n            <el-empty description=\"暂无资料数据\"></el-empty>\n          </div>\n          <div v-else class=\"table-container\">\n            <el-table \n              v-if=\"showMaterialsTable\"\n              :data=\"recentMaterials\" \n              style=\"width: 100%\"\n              :height=\"tableHeight\"\n              :show-header=\"true\"\n              :highlight-current-row=\"false\"\n            >\n              <el-table-column prop=\"name\" label=\"资料名称\" />\n              <el-table-column prop=\"courseName\" label=\"所属课程\" width=\"120\" />\n              <el-table-column label=\"上传时间\" width=\"180\">\n                <template #default=\"scope\">\n                  {{ formatDate(scope.row.createTime) }}\n                </template>\n              </el-table-column>\n              <el-table-column label=\"操作\" width=\"100\">\n                <template #default=\"scope\">\n                  <el-button type=\"primary\" size=\"small\" @click=\"downloadMaterial(scope.row)\">\n                    下载\n                  </el-button>\n                </template>\n              </el-table-column>\n            </el-table>\n            <div v-else class=\"loading-placeholder\"></div>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n    \n    <el-row class=\"mt-20\">\n      <el-col :span=\"24\">\n        <el-card v-loading=\"assignmentsLoading\">\n          <template #header>\n            <div class=\"card-header\">\n              <span>待完成作业</span>\n              <el-button type=\"text\" @click=\"goToAssignments\">查看全部</el-button>\n            </div>\n          </template>\n          <div class=\"empty-block\" v-if=\"recentAssignments.length === 0\">\n            <el-empty description=\"暂无待完成作业\"></el-empty>\n          </div>\n          <div v-else class=\"table-container\">\n            <el-table \n              v-if=\"showAssignmentsTable\"\n              :data=\"recentAssignments\" \n              style=\"width: 100%\"\n              :height=\"tableHeight\"\n              :show-header=\"true\"\n              :highlight-current-row=\"false\"\n            >\n              <el-table-column prop=\"title\" label=\"作业标题\" min-width=\"180\" />\n              <el-table-column prop=\"courseName\" label=\"所属课程\" width=\"150\" />\n              <el-table-column label=\"截止日期\" width=\"180\">\n                <template #default=\"scope\">\n                  {{ formatDate(scope.row.deadline) }}\n                </template>\n              </el-table-column>\n              <el-table-column label=\"状态\" width=\"100\">\n                <template #default=\"scope\">\n                  <el-tag :type=\"getStatusTag(scope.row.status)\">\n                    {{ getStatusLabel(scope.row.status) }}\n                  </el-tag>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"提交状态\" width=\"100\">\n                <template #default=\"scope\">\n                  <el-tag v-if=\"scope.row.submitted\" type=\"success\">已提交</el-tag>\n                  <el-tag v-else type=\"danger\">未提交</el-tag>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"操作\" width=\"120\">\n                <template #default>\n                  <el-button \n                    type=\"success\" \n                    size=\"small\" \n                    @click=\"goToAssignments\"\n                  >\n                    查看\n                  </el-button>\n                </template>\n              </el-table-column>\n            </el-table>\n            <div v-else class=\"loading-placeholder\"></div>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onBeforeUnmount, nextTick } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport axios from 'axios'\nimport { ElMessage } from 'element-plus'\n\nconst store = useStore()\nconst router = useRouter()\nconst userInfo = computed(() => store.state.user.userInfo)\n\n// 课程相关\nconst coursesLoading = ref(false)\nconst recentCourses = ref([])\nconst showCoursesTable = ref(false)\n\n// 资料相关\nconst materialsLoading = ref(false)\nconst recentMaterials = ref([])\nconst showMaterialsTable = ref(false)\n\n// 作业相关\nconst assignmentsLoading = ref(false)\nconst recentAssignments = ref([])\nconst showAssignmentsTable = ref(false)\n\n// 表格高度\nconst tableHeight = 200\n\n// 添加 ResizeObserver 错误处理\nconst originalError = window.console.error;\nconst errorHandler = function() {\n  const args = Array.from(arguments);\n  const firstArg = args[0];\n  \n  if (firstArg && typeof firstArg === 'string' && firstArg.includes('ResizeObserver')) {\n    // 忽略 ResizeObserver 错误\n    return;\n  }\n  return originalError.apply(window.console, args);\n};\n\n// 获取最近的课程（最多5个）\nconst fetchRecentCourses = async () => {\n  coursesLoading.value = true\n  try {\n    const token = localStorage.getItem('token')\n    const response = await axios.get('/api/student/courses', {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    })\n    \n    if (response.data.code === 200) {\n      // 获取最近的5个课程\n      recentCourses.value = (response.data.data || []).slice(0, 5)\n      console.log('获取最近课程成功:', recentCourses.value)\n      \n      // 延迟显示表格\n      nextTick(() => {\n        showCoursesTable.value = true\n      })\n      \n      // 获取作业列表\n      fetchRecentAssignments()\n    } else {\n      console.error('获取课程失败:', response.data.message)\n    }\n  } catch (error) {\n    console.error('获取课程出错:', error)\n  } finally {\n    coursesLoading.value = false\n  }\n}\n\n// 获取最近的资料（最多5个）\nconst fetchRecentMaterials = async () => {\n  materialsLoading.value = true\n  try {\n    const token = localStorage.getItem('token')\n    // 先获取课程列表，用于后续关联课程名称\n    const coursesResponse = await axios.get('/api/student/courses', {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    })\n    \n    if (coursesResponse.data.code === 200) {\n      const courses = coursesResponse.data.data || []\n      \n      // 直接查询所有课程资料，不限定特定课程\n      const materialsResponse = await axios.get('/api/material/list', {\n        params: {\n          pageNum: 1,\n          pageSize: 5,\n          // 不指定courseId，查询所有课程\n          // 按创建时间降序排序\n          orderBy: 'create_time',\n          orderType: 'desc'\n        },\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n      \n      if (materialsResponse.data.code === 200) {\n        // 获取最新的5个资料\n        const materials = materialsResponse.data.data.records || []\n        \n        // 添加课程名称\n        recentMaterials.value = materials.map(material => {\n          const course = courses.find(c => c.id === material.courseId)\n          return {\n            ...material,\n            courseName: course ? course.name : '未知课程'\n          }\n        })\n        \n        // 延迟显示表格\n        nextTick(() => {\n          showMaterialsTable.value = true\n        })\n        \n        console.log('获取最新资料成功:', recentMaterials.value)\n      } else {\n        console.error('获取资料失败:', materialsResponse.data.message)\n      }\n    }\n  } catch (error) {\n    console.error('获取资料出错:', error)\n  } finally {\n    materialsLoading.value = false\n  }\n}\n\n// 获取待完成作业（最多5个）\nconst fetchRecentAssignments = async () => {\n  assignmentsLoading.value = true\n  try {\n    // 使用正确的学生作业列表API\n    const response = await axios.get('/api/assignment/student/list', {\n      params: {\n        current: 1,\n        size: 5,\n        status: 1 // 只查询进行中的作业\n      }\n    })\n    \n    if (response.data.code === 200) {\n      // 获取所有作业\n      const allAssignments = response.data.data.records || []\n      \n      // 筛选未提交的作业\n      const pendingAssignments = allAssignments\n        .filter(a => !a.submitted)\n        .slice(0, 5)\n      \n      recentAssignments.value = pendingAssignments\n      \n      // 延迟显示表格\n      nextTick(() => {\n        showAssignmentsTable.value = true\n      })\n      \n      console.log('获取待完成作业成功:', recentAssignments.value)\n    } else {\n      console.error('获取作业失败:', response.data.message)\n    }\n  } catch (error) {\n    console.error('获取作业出错:', error)\n  } finally {\n    assignmentsLoading.value = false\n  }\n}\n\n// 格式化日期\nconst formatDate = (dateString) => {\n  if (!dateString) return '未知时间'\n  const date = new Date(dateString)\n  return date.toLocaleString()\n}\n\n// 获取课程状态标签类型\nconst getStatusTag = (status) => {\n  switch (status) {\n    case 0: return 'danger'\n    case 1: return 'success'\n    case 2: return 'info'\n    default: return ''\n  }\n}\n\n// 获取课程状态标签文本\nconst getStatusLabel = (status) => {\n  switch (status) {\n    case 0: return '已关闭'\n    case 1: return '正常'\n    case 2: return '已结束'\n    default: return '未知'\n  }\n}\n\n// 查看课程资料\nconst viewMaterials = (courseId) => {\n  router.push({\n    name: 'StudentMaterials',\n    query: { courseId }\n  })\n}\n\n\n// 下载资料\nconst downloadMaterial = (material) => {\n  window.open(`/api/material/download/${material.id}`, '_blank')\n  ElMessage.success('开始下载资料')\n}\n\n// 跳转到课程页面\nconst goToCourses = () => {\n  router.push({ name: 'StudentCourses' })\n}\n\n// 跳转到资料页面\nconst goToMaterials = () => {\n  // 如果有课程，跳转到第一个课程的资料页面\n  if (recentCourses.value.length > 0) {\n    router.push({\n      name: 'StudentMaterials',\n      query: { courseId: recentCourses.value[0].id }\n    })\n  } else {\n    // 否则跳转到课程页面\n    router.push({ name: 'StudentCourses' })\n    ElMessage.info('请先选择一门课程')\n  }\n}\n\n// 跳转到作业页面\nconst goToAssignments = () => {\n  router.push({ name: 'StudentAssignments' })\n}\n\n// 页面加载时获取数据\nonMounted(() => {\n  // 设置错误处理器\n  window.console.error = errorHandler;\n  \n  // 获取数据\n  fetchRecentCourses();\n  fetchRecentMaterials();\n});\n\nonBeforeUnmount(() => {\n  // 恢复原始错误处理\n  window.console.error = originalError;\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.student-home {\n  h1 {\n    margin-bottom: 20px;\n  }\n  \n  .welcome-card {\n    margin-bottom: 20px;\n    \n    .welcome-message {\n      h2 {\n        margin-top: 0;\n        margin-bottom: 10px;\n        color: #409EFF;\n      }\n      \n      p {\n        margin: 0;\n        color: #606266;\n      }\n    }\n  }\n  \n  .mt-20 {\n    margin-top: 20px;\n  }\n  \n  .card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n  \n  .empty-block {\n    padding: 30px 0;\n  }\n  \n  .table-container {\n    height: 200px;\n    overflow: hidden;\n    \n    .el-table {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  \n  .loading-placeholder {\n    height: 200px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: #f5f7fa;\n    border-radius: 4px;\n    color: #909399;\n    font-size: 14px;\n    \n    &::before {\n      content: \"加载中...\";\n    }\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}