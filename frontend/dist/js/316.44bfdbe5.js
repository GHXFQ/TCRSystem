"use strict";(self["webpackChunktcr_system_frontend"]=self["webpackChunktcr_system_frontend"]||[]).push([[316],{316:function(e,a,l){l.r(a),l.d(a,{default:function(){return h}});var r=l(6768),t=l(4232);const o={class:"material-upload"},d={class:"card-header"},s={class:"filter-container"},i={class:"pagination-container"},u={key:0},n={class:"review-records"};function c(e,a,l,c,p,m){const b=(0,r.g2)("el-option"),k=(0,r.g2)("el-select"),v=(0,r.g2)("el-form-item"),f=(0,r.g2)("el-radio"),g=(0,r.g2)("el-radio-group"),y=(0,r.g2)("el-input"),_=(0,r.g2)("el-button"),w=(0,r.g2)("el-upload"),h=(0,r.g2)("el-form"),F=(0,r.g2)("el-card"),I=(0,r.g2)("el-table-column"),C=(0,r.g2)("el-table"),V=(0,r.g2)("el-pagination"),T=(0,r.g2)("el-descriptions-item"),W=(0,r.g2)("el-tag"),x=(0,r.g2)("el-descriptions"),R=(0,r.g2)("el-dialog"),U=(0,r.gN)("loading");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(F,{class:"box-card"},{header:(0,r.k6)((()=>a[12]||(a[12]=[(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("span",null,"教学材料上传")],-1)]))),default:(0,r.k6)((()=>[(0,r.bF)(h,{model:c.uploadForm,rules:c.rules,ref:"uploadFormRef","label-width":"100px"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{label:"课程",prop:"courseId"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{modelValue:c.uploadForm.courseId,"onUpdate:modelValue":a[0]||(a[0]=e=>c.uploadForm.courseId=e),placeholder:"请选择课程",onChange:c.handleCourseChange,style:{width:"350px"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.courses,(e=>((0,r.uX)(),(0,r.Wv)(b,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,r.bF)(v,{label:"材料类型",prop:"materialTypeId"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{modelValue:c.uploadForm.materialTypeId,"onUpdate:modelValue":a[1]||(a[1]=e=>c.uploadForm.materialTypeId=e),placeholder:"请选择材料类型",style:{width:"350px"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.materialTypes,(e=>((0,r.uX)(),(0,r.Wv)(b,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(v,{label:"学年",prop:"academicYear"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{modelValue:c.uploadForm.academicYear,"onUpdate:modelValue":a[2]||(a[2]=e=>c.uploadForm.academicYear=e),placeholder:"请选择学年",style:{width:"350px"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.academicYears,(e=>((0,r.uX)(),(0,r.Wv)(b,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(v,{label:"学期",prop:"semester"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{modelValue:c.uploadForm.semester,"onUpdate:modelValue":a[3]||(a[3]=e=>c.uploadForm.semester=e)},{default:(0,r.k6)((()=>[(0,r.bF)(f,{label:1},{default:(0,r.k6)((()=>a[13]||(a[13]=[(0,r.eW)("第一学期")]))),_:1}),(0,r.bF)(f,{label:2},{default:(0,r.k6)((()=>a[14]||(a[14]=[(0,r.eW)("第二学期")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(v,{label:"任务标题"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{modelValue:c.uploadForm.taskId,"onUpdate:modelValue":a[4]||(a[4]=e=>c.uploadForm.taskId=e),placeholder:"请选择任务标题（非必选）",clearable:"",style:{width:"350px"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.teacherTasks,(e=>((0,r.uX)(),(0,r.Wv)(b,{key:e.id,label:e.title,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),a[15]||(a[15]=(0,r.Lk)("div",{class:"el-form-item__description"},[(0,r.Lk)("small",null,"关联到教学材料任务可以自动记录任务完成情况")],-1))])),_:1}),(0,r.bF)(v,{label:"材料名称",prop:"name"},{default:(0,r.k6)((()=>[(0,r.bF)(y,{modelValue:c.uploadForm.name,"onUpdate:modelValue":a[5]||(a[5]=e=>c.uploadForm.name=e),placeholder:"请输入材料名称"},null,8,["modelValue"])])),_:1}),(0,r.bF)(v,{label:"材料描述",prop:"description"},{default:(0,r.k6)((()=>[(0,r.bF)(y,{modelValue:c.uploadForm.description,"onUpdate:modelValue":a[6]||(a[6]=e=>c.uploadForm.description=e),type:"textarea",rows:3,placeholder:"请输入材料描述"},null,8,["modelValue"])])),_:1}),(0,r.bF)(v,{label:"上传文件",prop:"file"},{default:(0,r.k6)((()=>[(0,r.bF)(w,{class:"upload-demo",action:c.uploadUrl,headers:c.uploadHeaders,"on-preview":c.handlePreview,"on-remove":c.handleRemove,"on-success":c.handleUploadSuccess,"on-error":c.handleUploadError,"before-upload":c.beforeUpload,limit:1,"file-list":c.fileList},{tip:(0,r.k6)((()=>a[17]||(a[17]=[(0,r.Lk)("div",{class:"el-upload__tip"}," 只能上传 doc/docx/pdf 文件，且不超过 10MB ",-1)]))),default:(0,r.k6)((()=>[(0,r.bF)(_,{type:"primary"},{default:(0,r.k6)((()=>a[16]||(a[16]=[(0,r.eW)("点击上传")]))),_:1})])),_:1},8,["action","headers","on-preview","on-remove","on-success","on-error","before-upload","file-list"])])),_:1}),(0,r.bF)(v,null,{default:(0,r.k6)((()=>[(0,r.bF)(_,{type:"primary",onClick:c.submitUpload,loading:c.uploading},{default:(0,r.k6)((()=>a[18]||(a[18]=[(0,r.eW)("提交")]))),_:1},8,["onClick","loading"]),(0,r.bF)(_,{onClick:c.resetForm},{default:(0,r.k6)((()=>a[19]||(a[19]=[(0,r.eW)("重置")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,r.bF)(F,{class:"box-card",style:{"margin-top":"20px"}},{header:(0,r.k6)((()=>[(0,r.Lk)("div",d,[a[21]||(a[21]=(0,r.Lk)("span",null,"已上传材料",-1)),(0,r.Lk)("div",s,[(0,r.bF)(h,{inline:!0,model:c.queryParams,class:"demo-form-inline"},{default:(0,r.k6)((()=>[(0,r.bF)(v,{label:"课程"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{modelValue:c.queryParams.courseId,"onUpdate:modelValue":a[7]||(a[7]=e=>c.queryParams.courseId=e),placeholder:"请选择课程",clearable:"",style:{width:"250px"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.courses,(e=>((0,r.uX)(),(0,r.Wv)(b,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(v,{label:"材料类型"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{modelValue:c.queryParams.materialTypeId,"onUpdate:modelValue":a[8]||(a[8]=e=>c.queryParams.materialTypeId=e),placeholder:"请选择材料类型",clearable:"",style:{width:"250px"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.materialTypes,(e=>((0,r.uX)(),(0,r.Wv)(b,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(v,{label:"学年"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{modelValue:c.queryParams.academicYear,"onUpdate:modelValue":a[9]||(a[9]=e=>c.queryParams.academicYear=e),placeholder:"请选择学年",clearable:"",style:{width:"250px"}},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(c.academicYears,(e=>((0,r.uX)(),(0,r.Wv)(b,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(v,{label:"学期"},{default:(0,r.k6)((()=>[(0,r.bF)(k,{modelValue:c.queryParams.semester,"onUpdate:modelValue":a[10]||(a[10]=e=>c.queryParams.semester=e),placeholder:"请选择学期",clearable:"",style:{width:"250px"}},{default:(0,r.k6)((()=>[(0,r.bF)(b,{label:"第一学期",value:1}),(0,r.bF)(b,{label:"第二学期",value:2})])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(v,null,{default:(0,r.k6)((()=>[(0,r.bF)(_,{type:"primary",onClick:c.fetchMaterials},{default:(0,r.k6)((()=>a[20]||(a[20]=[(0,r.eW)("查询")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])])])),default:(0,r.k6)((()=>[(0,r.bo)(((0,r.uX)(),(0,r.Wv)(C,{data:c.materials,style:{width:"100%"}},{default:(0,r.k6)((()=>[(0,r.bF)(I,{prop:"name",label:"材料名称",width:"180"}),(0,r.bF)(I,{prop:"course_name",label:"所属课程",width:"150"}),(0,r.bF)(I,{prop:"material_type_name",label:"材料类型",width:"120"},{default:(0,r.k6)((e=>[(0,r.eW)((0,t.v_)(e.row.material_type_name||"未知类型"),1)])),_:1}),(0,r.bF)(I,{prop:"academic_year",label:"学年",width:"100"},{default:(0,r.k6)((e=>[(0,r.eW)((0,t.v_)(e.row.academic_year||"未知学年"),1)])),_:1}),(0,r.bF)(I,{prop:"semester",label:"学期",width:"100"},{default:(0,r.k6)((e=>[(0,r.eW)((0,t.v_)(1===e.row.semester?"第一学期":2===e.row.semester?"第二学期":"未知学期"),1)])),_:1}),(0,r.bF)(I,{prop:"description",label:"描述"}),(0,r.bF)(I,{prop:"create_time",label:"上传时间",width:"180"}),(0,r.bF)(I,{label:"操作",width:"250"},{default:(0,r.k6)((e=>[(0,r.bF)(_,{type:"text",size:"small",onClick:a=>c.downloadMaterial(e.row)},{default:(0,r.k6)((()=>a[22]||(a[22]=[(0,r.eW)("下载")]))),_:2},1032,["onClick"]),e.row.review_id?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(_,{key:0,type:"text",size:"small",onClick:a=>c.submitToReview(e.row)},{default:(0,r.k6)((()=>a[23]||(a[23]=[(0,r.eW)("提交审核")]))),_:2},1032,["onClick"])),e.row.review_id?((0,r.uX)(),(0,r.Wv)(_,{key:1,type:"text",size:"small",onClick:a=>c.viewReviewStatus(e.row)},{default:(0,r.k6)((()=>a[24]||(a[24]=[(0,r.eW)("查看审核状态")]))),_:2},1032,["onClick"])):(0,r.Q3)("",!0),(0,r.bF)(_,{type:"text",size:"small",onClick:a=>c.deleteMaterial(e.row),class:"danger-button"},{default:(0,r.k6)((()=>a[25]||(a[25]=[(0,r.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[U,c.loading]]),(0,r.Lk)("div",i,[(0,r.bF)(V,{background:"",layout:"total, prev, pager, next",total:c.total,"page-size":c.queryParams.size,"current-page":c.queryParams.current,onCurrentChange:c.handleCurrentChange},null,8,["total","page-size","current-page","onCurrentChange"])])])),_:1}),(0,r.bF)(R,{title:"审核状态",modelValue:c.reviewDialogVisible,"onUpdate:modelValue":a[11]||(a[11]=e=>c.reviewDialogVisible=e),width:"60%"},{default:(0,r.k6)((()=>[c.reviewDetail?((0,r.uX)(),(0,r.CE)("div",u,[(0,r.bF)(x,{column:2,border:""},{default:(0,r.k6)((()=>[(0,r.bF)(T,{label:"材料名称"},{default:(0,r.k6)((()=>[(0,r.eW)((0,t.v_)(c.reviewDetail.material_name),1)])),_:1}),(0,r.bF)(T,{label:"所属课程"},{default:(0,r.k6)((()=>[(0,r.eW)((0,t.v_)(c.reviewDetail.course_name||"未知课程"),1)])),_:1}),(0,r.bF)(T,{label:"材料类型"},{default:(0,r.k6)((()=>[(0,r.eW)((0,t.v_)(c.reviewDetail.material_type_name||"未知类型"),1)])),_:1}),(0,r.bF)(T,{label:"学年/学期"},{default:(0,r.k6)((()=>[(0,r.eW)((0,t.v_)(c.reviewDetail.academic_year||"未知学年")+" / "+(0,t.v_)(1===c.reviewDetail.semester?"第一学期":"第二学期"),1)])),_:1}),(0,r.bF)(T,{label:"当前状态"},{default:(0,r.k6)((()=>[(0,r.bF)(W,{type:c.getStatusType(c.reviewDetail.status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,t.v_)(c.getStatusText(c.reviewDetail.status)),1)])),_:1},8,["type"])])),_:1}),(0,r.bF)(T,{label:"当前审核人"},{default:(0,r.k6)((()=>[(0,r.eW)((0,t.v_)(c.reviewDetail.current_reviewer_name||"暂无审核人"),1)])),_:1})])),_:1}),(0,r.Lk)("div",n,[a[26]||(a[26]=(0,r.Lk)("h3",null,"审核记录",-1)),(0,r.bF)(C,{data:c.reviewRecords,style:{width:"100%"}},{default:(0,r.k6)((()=>[(0,r.bF)(I,{prop:"reviewer_name",label:"审核人",width:"120"}),(0,r.bF)(I,{prop:"reviewer_title",label:"审核人职称",width:"120"},{default:(0,r.k6)((e=>[(0,r.eW)((0,t.v_)(c.getReviewerTitleText(e.row.reviewer_title)),1)])),_:1}),(0,r.bF)(I,{prop:"result",label:"审核结果",width:"100"},{default:(0,r.k6)((e=>[(0,r.bF)(W,{type:1===e.row.result?"success":"danger"},{default:(0,r.k6)((()=>[(0,r.eW)((0,t.v_)(1===e.row.result?"通过":"不通过"),1)])),_:2},1032,["type"])])),_:1}),(0,r.bF)(I,{prop:"comment",label:"审核意见"}),(0,r.bF)(I,{prop:"create_time",label:"审核时间",width:"180"})])),_:1},8,["data"])])])):(0,r.Q3)("",!0)])),_:1},8,["modelValue"])])}var p=l(144),m=l(1219),b=l(2933),k=l(788),v=l.n(k),f=l(782),g=l(1387),y={name:"MaterialUpload",setup(){const e=(0,f.Pj)(),a=(0,p.KR)(null),l=(0,g.lq)(),t=(0,r.EW)((()=>e.state.user)),o=(0,p.Kh)({courseId:"",materialTypeId:"",academicYear:"",semester:1,taskId:null,name:"",description:"",file:null}),d={courseId:[{required:!0,message:"请选择课程",trigger:"change"}],materialTypeId:[{required:!0,message:"请选择材料类型",trigger:"change"}],academicYear:[{required:!0,message:"请选择学年",trigger:"change"}],semester:[{required:!0,message:"请选择学期",trigger:"change"}],name:[{required:!0,message:"请输入材料名称",trigger:"blur"}],description:[{required:!0,message:"请输入材料描述",trigger:"blur"}]},s="/api/material/upload",i={Authorization:`Bearer ${localStorage.getItem("token")}`},u=(0,p.KR)([]),n=(0,p.KR)(!1),c=(0,p.KR)([]),k=async()=>{try{let e=t.value?.id;if(!e){const a=JSON.parse(localStorage.getItem("userInfo")||"{}");e=a.id}if(!e)return void m.nk.warning("无法获取用户信息，请重新登录");console.log("当前教师ID:",e);const a=await v().get(`/api/course/teacher/${e}`);c.value=a.data.data}catch(e){console.error("获取课程列表失败",e),m.nk.error("获取课程列表失败")}},y=(0,p.KR)([]),_=async()=>{try{const e=await v().get("/api/material-type/list");y.value=e.data.data}catch(e){console.error("获取材料类型列表失败",e),m.nk.error("获取材料类型列表失败")}},w=(0,p.KR)([]),h=()=>{const e=(new Date).getFullYear(),a=[];for(let l=0;l<5;l++){const r=e-l;a.push(`${r}-${r+1}`)}w.value=a},F=(0,p.KR)([]),I=async()=>{try{let e=t.value?.id;if(!e){const a=JSON.parse(localStorage.getItem("userInfo")||"{}");e=a.id}if(!e)return void console.warn("无法获取教师ID，未加载用户信息");console.log("获取教师任务列表，教师ID:",e);const a=await v().get("/api/material-task/teacher/tasks",{params:{teacherId:e}});200===a.data.code?(F.value=a.data.data||[],console.log("获取到教师任务列表:",F.value.length)):(console.error("获取教师任务列表失败:",a.data.message),F.value=[])}catch(e){console.error("获取教师任务列表失败:",e),F.value=[]}},C=()=>{},V=()=>{o.file=null},T=e=>{let a=!1,l="";"application/msword"===e.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type?(a=!0,l="doc"):"application/pdf"===e.type&&(a=!0,l="pdf");const r=e.size/1024/1024<10;return a?r?(o.file=e,o.fileType=l,!0):(m.nk.error("上传文件大小不能超过 10MB!"),!1):(m.nk.error("上传文件只能是 doc/docx/pdf 格式!"),!1)},W=e=>{200===e.code?(o.filePath=e.data.filePath,o.fileSize=e.data.fileSize,o.fileType=o.fileType||"unknown",m.nk.success("文件上传成功")):m.nk.error(e.message||"文件上传失败")},x=e=>{console.error("文件上传失败",e),m.nk.error("文件上传失败")},R=async()=>{o.file?a.value.validate((async e=>{if(e){n.value=!0;try{let e=t.value?.id;if(!e){const a=JSON.parse(localStorage.getItem("userInfo")||"{}");e=a.id}if(!e)return m.nk.warning("无法获取用户信息，请重新登录"),void(n.value=!1);console.log("提交材料时的表单数据:",JSON.stringify(o)),console.log("任务ID:",o.taskId,"类型:",typeof o.taskId);const a=new FormData;a.append("file",o.file),a.append("courseId",o.courseId),a.append("materialTypeId",o.materialTypeId),a.append("academicYear",o.academicYear),a.append("semester",o.semester),a.append("name",o.name),a.append("description",o.description),a.append("type",0),a.append("teacherId",e),o.taskId?(console.log("添加任务ID到表单:",o.taskId),a.append("taskId",o.taskId)):console.log("未选择任务，不添加taskId");const l=await v().post("/api/material/upload",a,{headers:{"Content-Type":"multipart/form-data"}});200===l.data.code?(m.nk.success("材料上传成功，已提交审核"),U(),X()):m.nk.error(l.data.message||"材料上传失败")}catch(a){console.error("材料上传失败",a),m.nk.error("材料上传失败: "+(a.response?.data?.message||a.message||"未知错误"))}finally{n.value=!1}}})):m.nk.warning("请先上传文件")},U=()=>{a.value.resetFields(),u.value=[],o.file=null},K=(0,p.Kh)({current:1,size:10,teacherId:null,courseId:null,materialTypeId:null,academicYear:null,semester:null,type:0}),S=(0,p.KR)([]),D=(0,p.KR)(0),q=(0,p.KR)(!1),X=async()=>{q.value=!0;try{let e=t.value?.id;if(!e){const a=JSON.parse(localStorage.getItem("userInfo")||"{}");e=a.id}if(!e)return m.nk.warning("无法获取用户信息，请重新登录"),void(q.value=!1);K.teacherId=e;const a=await v().get("/api/material/teacher",{params:K});if(a.data&&a.data.data){const e=a.data.data.records||[];S.value=e.map((e=>({...e,material_type_name:e.material_type_name||"未知类型",course_name:e.course_name||"未知课程",academic_year:e.academic_year||"未知学年",semester:e.semester?Number(e.semester):null}))),D.value=a.data.data.total||0,console.log("获取到的材料列表:",S.value),S.value.length>0&&(console.log("第一条材料数据样例:",S.value[0]),console.log("材料类型名称:",S.value[0].material_type_name),console.log("学年:",S.value[0].academic_year),console.log("学期:",S.value[0].semester,"类型:",typeof S.value[0].semester))}else S.value=[],D.value=0}catch(e){console.error("获取材料列表失败",e),m.nk.error("获取材料列表失败"),S.value=[],D.value=0}finally{q.value=!1}},P=e=>{K.current=e,X()},Y=()=>{},E=e=>{if(e.id)try{const a=`/api/material/download/${e.id}`,l=document.createElement("a");l.href=a,l.target="_blank",l.setAttribute("download",""),document.body.appendChild(l),l.click(),document.body.removeChild(l),v().post(`/api/material/download/${e.id}`).catch((e=>console.error("更新下载次数失败:",e))),m.nk.success("开始下载文件")}catch(a){console.error("下载文件失败:",a),m.nk.error("下载文件失败")}else m.nk.warning("材料ID为空")},L=e=>{b.s.confirm("确定要删除该材料吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{try{const a=await v()["delete"](`/api/material/${e.id}`);200===a.data.code?(m.nk.success("删除成功"),X()):m.nk.error(a.data.message||"删除失败")}catch(a){console.error("删除失败",a),m.nk.error("删除失败")}})).catch((()=>{}))},z=async e=>{try{let a=t.value?.id;if(!a){const e=JSON.parse(localStorage.getItem("userInfo")||"{}");a=e.id}if(!a)return void m.nk.warning("无法获取用户信息，请重新登录");const l=await v().post("/api/material-review/submit",{materialId:e.id,academicYear:e.academic_year,semester:e.semester,materialTypeId:e.material_type_id,teacherId:a,courseId:e.course_id});200===l.data.code?(m.nk.success("提交审核成功"),X()):m.nk.error(l.data.message||"提交审核失败")}catch(a){console.error("提交审核失败",a),m.nk.error("提交审核失败")}},N=(0,p.KR)(!1),M=(0,p.KR)(null),$=(0,p.KR)([]),J=async e=>{try{const a=await v().get(`/api/material-review/detail/${e.review_id}`);M.value=a.data.data,console.log("审核详情:",M.value);const l=await v().get(`/api/material-review/records/${e.review_id}`);$.value=l.data.data,M.value&&(M.value.material_type_name||console.warn("审核详情中缺少材料类型名称"),M.value.academic_year||console.warn("审核详情中缺少学年信息")),N.value=!0}catch(a){console.error("获取审核详情失败",a),m.nk.error("获取审核详情失败")}},O=e=>{switch(e){case 0:return"待审核";case 1:return"课程负责人审核中";case 2:return"专业负责人审核中";case 3:return"副院长审核中";case 4:return"教务人员审核中";case 5:return"审核通过";case 6:return"审核不通过";default:return"未知状态"}},B=e=>{switch(e){case 0:return"info";case 1:case 2:case 3:case 4:return"warning";case 5:return"success";case 6:return"danger";default:return"info"}},A=e=>{switch(e){case 0:return"普通教师";case 1:return"课程负责人";case 2:return"专业负责人";case 3:return"副院长";case 4:return"教务人员";default:return"未知职称"}};return(0,r.sV)((()=>{k(),_(),h(),I();const{taskId:e,materialTypeId:a,courseId:r,academicYear:t,semester:d}=l.query;e&&(o.taskId=Number(e)),a&&(o.materialTypeId=Number(a)),r&&(o.courseId=Number(r)),t&&(o.academicYear=t),d&&(o.semester=Number(d)),X()})),{uploadFormRef:a,uploadForm:o,rules:d,uploadUrl:s,uploadHeaders:i,fileList:u,uploading:n,courses:c,materialTypes:y,academicYears:w,handlePreview:C,handleRemove:V,beforeUpload:T,handleUploadSuccess:W,handleUploadError:x,submitUpload:R,resetForm:U,queryParams:K,materials:S,total:D,loading:q,fetchMaterials:X,handleCurrentChange:P,handleCourseChange:Y,downloadMaterial:E,deleteMaterial:L,submitToReview:z,reviewDialogVisible:N,reviewDetail:M,reviewRecords:$,viewReviewStatus:J,getStatusText:O,getStatusType:B,getReviewerTitleText:A,teacherTasks:F}}},_=l(1241);const w=(0,_.A)(y,[["render",c],["__scopeId","data-v-c6a3620a"]]);var h=w}}]);
//# sourceMappingURL=316.44bfdbe5.js.map