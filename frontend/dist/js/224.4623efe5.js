"use strict";(self["webpackChunktcr_system_frontend"]=self["webpackChunktcr_system_frontend"]||[]).push([[224],{4843:function(e,l,r){r.r(l),r.d(l,{default:function(){return b}});var a=r(6768),o=r(144),s=r(1387),d=r(1219),u=r(788),t=r.n(u);const n={class:"register-container"},i={class:"register-box"};var m={__name:"Register",setup(e){const l=(0,s.rd)(),r=(0,o.KR)(null),u=(0,o.KR)(!1),m=(0,o.Kh)({username:"",password:"",confirmPassword:"",realName:"",email:"",phone:"",role:0}),p=(e,l,a)=>{""===l?a(new Error("请输入密码")):(""!==m.confirmPassword&&r.value?.validateField("confirmPassword"),a())},g=(e,l,r)=>{""===l?r(new Error("请再次输入密码")):l!==m.password?r(new Error("两次输入密码不一致")):r()},b={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,validator:p,trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}],confirmPassword:[{required:!0,validator:g,trigger:"blur"}],realName:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],email:[{required:!1,type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phone:[{required:!1,pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},c=async()=>{if(r.value)try{await r.value.validate(),u.value=!0;try{const e=await t().post("/api/user/register",m);200===e.data.code?(d.nk.success("注册成功，请登录"),l.push("/login")):d.nk.error(e.data.message||"注册失败，请重试")}catch(e){console.error(e),d.nk.error(e.response?.data?.message||"注册失败，请重试")}finally{u.value=!1}}catch(e){console.error("表单验证失败",e)}},f=()=>{l.push("/login")};return(e,l)=>{const o=(0,a.g2)("el-input"),s=(0,a.g2)("el-form-item"),d=(0,a.g2)("el-radio"),t=(0,a.g2)("el-radio-group"),p=(0,a.g2)("el-button"),g=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("div",i,[l[11]||(l[11]=(0,a.Lk)("div",{class:"register-title"},[(0,a.Lk)("h2",null,"用户注册")],-1)),(0,a.bF)(g,{ref_key:"registerForm",ref:r,model:m,rules:b,"label-width":"100px",class:"register-form"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{label:"用户名",prop:"username"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:m.username,"onUpdate:modelValue":l[0]||(l[0]=e=>m.username=e),placeholder:"请输入用户名/学号/工号"},null,8,["modelValue"])])),_:1}),(0,a.bF)(s,{label:"密码",prop:"password"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:m.password,"onUpdate:modelValue":l[1]||(l[1]=e=>m.password=e),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])),_:1}),(0,a.bF)(s,{label:"确认密码",prop:"confirmPassword"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:m.confirmPassword,"onUpdate:modelValue":l[2]||(l[2]=e=>m.confirmPassword=e),type:"password",placeholder:"请再次输入密码","show-password":""},null,8,["modelValue"])])),_:1}),(0,a.bF)(s,{label:"真实姓名",prop:"realName"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:m.realName,"onUpdate:modelValue":l[3]||(l[3]=e=>m.realName=e),placeholder:"请输入真实姓名"},null,8,["modelValue"])])),_:1}),(0,a.bF)(s,{label:"邮箱",prop:"email"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:m.email,"onUpdate:modelValue":l[4]||(l[4]=e=>m.email=e),placeholder:"请输入邮箱"},null,8,["modelValue"])])),_:1}),(0,a.bF)(s,{label:"手机号",prop:"phone"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:m.phone,"onUpdate:modelValue":l[5]||(l[5]=e=>m.phone=e),placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1}),(0,a.bF)(s,{label:"角色",prop:"role"},{default:(0,a.k6)((()=>[(0,a.bF)(t,{modelValue:m.role,"onUpdate:modelValue":l[6]||(l[6]=e=>m.role=e)},{default:(0,a.k6)((()=>[(0,a.bF)(d,{label:0},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("学生")]))),_:1}),(0,a.bF)(d,{label:1},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("教师")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)((()=>[(0,a.bF)(p,{type:"primary",loading:u.value,onClick:c},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("注册")]))),_:1},8,["loading"]),(0,a.bF)(p,{onClick:f},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("返回登录")]))),_:1})])),_:1})])),_:1},8,["model"])])])}}},p=r(1241);const g=(0,p.A)(m,[["__scopeId","data-v-b597bf70"]]);var b=g}}]);
//# sourceMappingURL=224.4623efe5.js.map