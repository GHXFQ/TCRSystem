"use strict";(self["webpackChunktcr_system_frontend"]=self["webpackChunktcr_system_frontend"]||[]).push([[887],{5887:function(a,e,t){t.r(e),t.d(e,{default:function(){return U}});var l=t(6768),s=t(4232),r=t(144),o=t(782),n=t(1387),d=t(9671),c=t(7477),u=t(788),i=t.n(u);const k={class:"admin-home"},v={class:"dashboard-header"},b={class:"welcome-section"},f={class:"subtitle"},m={class:"actions"},h={class:"stat-item"},_={class:"stat-icon user-icon"},F={class:"stat-info"},y={class:"stat-value"},p={class:"stat-item"},L={class:"stat-icon teacher-icon"},g={class:"stat-info"},C={class:"stat-value"},w={class:"stat-item"},R={class:"stat-icon course-icon"},T={class:"stat-info"},W={class:"stat-value"},x={class:"stat-item"},A={class:"stat-icon file-icon"},S={class:"stat-info"},X={class:"stat-value"},M={class:"card-header"},D={class:"chart-controls"},z={class:"quick-actions"};var B={__name:"Home",setup(a){const e=(0,o.Pj)(),t=(0,n.rd)(),u=(0,l.EW)((()=>e.state.user.userInfo)),B=(0,r.KR)((new Date).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})),K=(0,r.KR)((new Date).toLocaleDateString("zh-CN",{weekday:"long"})),E=(0,r.Kh)({userCount:0,userTrend:5,teacherCount:0,teacherTrend:3,courseCount:0,courseTrend:10,materialCount:0,materialTrend:-2}),U=(0,r.KR)(null),V=(0,r.KR)("month");let N=null;const q=async()=>{try{try{const a=await i().get("/api/admin/user/statistics");200===a.data.code&&(E.userCount=a.data.data.totalUsers||0,E.teacherCount=a.data.data.teacherCount||0)}catch(a){console.error("获取用户统计数据失败:",a)}try{const a=await i().get("/api/admin/course/count");200===a.data.code&&(E.courseCount=a.data.data||0)}catch(a){console.error("获取课程数量失败:",a)}try{const a=await i().get("/api/admin/material/count");200===a.data.code&&(E.materialCount=a.data.data||0)}catch(a){console.error("获取材料数量失败:",a)}}catch(a){console.error("获取统计数据失败:",a)}},I=()=>{U.value&&(N=d.Ts(U.value),P())},P=()=>{let a=[],e=[],t=[];"week"===V.value?(a=["周一","周二","周三","周四","周五","周六","周日"],e=[120,132,101,134,90,30,20],t=[220,182,191,234,290,330,310]):"month"===V.value?(a=Array.from({length:30},((a,e)=>e+1+"日")),e=Array.from({length:30},(()=>Math.floor(200*Math.random())+100)),t=Array.from({length:30},(()=>Math.floor(300*Math.random())+200))):(a=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],e=[820,932,901,934,1290,1330,1320,999,1090,1230,1310,1510],t=[620,732,701,734,1090,1130,1120,899,990,1130,1110,1310]);const l={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["用户数","课程数"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:a,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"用户数",type:"line",smooth:!0,data:e,itemStyle:{color:"#409EFF"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(64, 158, 255, 0.7)"},{offset:1,color:"rgba(64, 158, 255, 0.1)"}]}}},{name:"课程数",type:"line",smooth:!0,data:t,itemStyle:{color:"#67C23A"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(103, 194, 58, 0.7)"},{offset:1,color:"rgba(103, 194, 58, 0.1)"}]}}}]};N.setOption(l)},j=()=>{N&&N.resize()},H=async()=>{await q(),N&&P()},O=a=>{t.push(a)};return window.addEventListener("resize",j),(0,l.wB)(V,((a,e)=>{a!==e&&P()})),(0,l.sV)((async()=>{await q(),(0,l.dY)((()=>{I()}))})),(a,e)=>{const t=(0,l.g2)("el-icon"),o=(0,l.g2)("el-button"),n=(0,l.g2)("el-card"),d=(0,l.g2)("el-col"),i=(0,l.g2)("el-row"),N=(0,l.g2)("el-radio-button"),q=(0,l.g2)("el-radio-group");return(0,l.uX)(),(0,l.CE)("div",k,[(0,l.Lk)("div",v,[(0,l.Lk)("div",b,[(0,l.Lk)("h1",null,"欢迎回来，"+(0,s.v_)(u.value?.realName||"管理员"),1),(0,l.Lk)("p",f,"今天是 "+(0,s.v_)(B.value)+" · "+(0,s.v_)(K.value),1)]),(0,l.Lk)("div",m,[(0,l.bF)(o,{type:"primary",onClick:H},{default:(0,l.k6)((()=>[(0,l.bF)(t,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.Refresh))])),_:1}),e[6]||(e[6]=(0,l.eW)(" 刷新数据 "))])),_:1})])]),(0,l.bF)(i,{gutter:20,class:"stat-row"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{xs:24,sm:12,md:6},{default:(0,l.k6)((()=>[(0,l.bF)(n,{class:"stat-card",shadow:"hover"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",h,[(0,l.Lk)("div",_,[(0,l.bF)(t,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.User))])),_:1})]),(0,l.Lk)("div",F,[e[7]||(e[7]=(0,l.Lk)("div",{class:"stat-label"},"用户总数",-1)),(0,l.Lk)("div",y,(0,s.v_)(E.userCount||0),1),(0,l.Lk)("div",{class:(0,s.C4)(["stat-trend",{up:E.userTrend>0}])},[E.userTrend>0?((0,l.uX)(),(0,l.Wv)(t,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.CaretTop))])),_:1})):((0,l.uX)(),(0,l.Wv)(t,{key:1},{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.CaretBottom))])),_:1})),(0,l.Lk)("span",null,(0,s.v_)(Math.abs(E.userTrend||0))+"%",1)],2)])])])),_:1})])),_:1}),(0,l.bF)(d,{xs:24,sm:12,md:6},{default:(0,l.k6)((()=>[(0,l.bF)(n,{class:"stat-card",shadow:"hover"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",p,[(0,l.Lk)("div",L,[(0,l.bF)(t,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.Avatar))])),_:1})]),(0,l.Lk)("div",g,[e[8]||(e[8]=(0,l.Lk)("div",{class:"stat-label"},"教师数量",-1)),(0,l.Lk)("div",C,(0,s.v_)(E.teacherCount||0),1),(0,l.Lk)("div",{class:(0,s.C4)(["stat-trend",{up:E.teacherTrend>0}])},[E.teacherTrend>0?((0,l.uX)(),(0,l.Wv)(t,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.CaretTop))])),_:1})):((0,l.uX)(),(0,l.Wv)(t,{key:1},{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.CaretBottom))])),_:1})),(0,l.Lk)("span",null,(0,s.v_)(Math.abs(E.teacherTrend||0))+"%",1)],2)])])])),_:1})])),_:1}),(0,l.bF)(d,{xs:24,sm:12,md:6},{default:(0,l.k6)((()=>[(0,l.bF)(n,{class:"stat-card",shadow:"hover"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",w,[(0,l.Lk)("div",R,[(0,l.bF)(t,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.Reading))])),_:1})]),(0,l.Lk)("div",T,[e[9]||(e[9]=(0,l.Lk)("div",{class:"stat-label"},"课程数量",-1)),(0,l.Lk)("div",W,(0,s.v_)(E.courseCount||0),1),(0,l.Lk)("div",{class:(0,s.C4)(["stat-trend",{up:E.courseTrend>0}])},[E.courseTrend>0?((0,l.uX)(),(0,l.Wv)(t,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.CaretTop))])),_:1})):((0,l.uX)(),(0,l.Wv)(t,{key:1},{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.CaretBottom))])),_:1})),(0,l.Lk)("span",null,(0,s.v_)(Math.abs(E.courseTrend||0))+"%",1)],2)])])])),_:1})])),_:1}),(0,l.bF)(d,{xs:24,sm:12,md:6},{default:(0,l.k6)((()=>[(0,l.bF)(n,{class:"stat-card",shadow:"hover"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",x,[(0,l.Lk)("div",A,[(0,l.bF)(t,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.Document))])),_:1})]),(0,l.Lk)("div",S,[e[10]||(e[10]=(0,l.Lk)("div",{class:"stat-label"},"资料数量",-1)),(0,l.Lk)("div",X,(0,s.v_)(E.materialCount||0),1),(0,l.Lk)("div",{class:(0,s.C4)(["stat-trend",{up:E.materialTrend>0}])},[E.materialTrend>0?((0,l.uX)(),(0,l.Wv)(t,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.CaretTop))])),_:1})):((0,l.uX)(),(0,l.Wv)(t,{key:1},{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.CaretBottom))])),_:1})),(0,l.Lk)("span",null,(0,s.v_)(Math.abs(E.materialTrend||0))+"%",1)],2)])])])),_:1})])),_:1})])),_:1}),(0,l.bF)(i,{gutter:20,class:"chart-row"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{xs:24,lg:16},{default:(0,l.k6)((()=>[(0,l.bF)(n,{class:"chart-card",shadow:"hover"},{header:(0,l.k6)((()=>[(0,l.Lk)("div",M,[e[14]||(e[14]=(0,l.Lk)("span",null,"系统数据趋势",-1)),(0,l.Lk)("div",D,[(0,l.bF)(q,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a),size:"small"},{default:(0,l.k6)((()=>[(0,l.bF)(N,{label:"week"},{default:(0,l.k6)((()=>e[11]||(e[11]=[(0,l.eW)("周")]))),_:1}),(0,l.bF)(N,{label:"month"},{default:(0,l.k6)((()=>e[12]||(e[12]=[(0,l.eW)("月")]))),_:1}),(0,l.bF)(N,{label:"year"},{default:(0,l.k6)((()=>e[13]||(e[13]=[(0,l.eW)("年")]))),_:1})])),_:1},8,["modelValue"])])])])),default:(0,l.k6)((()=>[(0,l.Lk)("div",{ref_key:"chartContainer",ref:U,class:"chart-container"},null,512)])),_:1})])),_:1}),(0,l.bF)(d,{xs:24,lg:8},{default:(0,l.k6)((()=>[(0,l.bF)(n,{class:"quick-actions-card",shadow:"hover"},{header:(0,l.k6)((()=>e[15]||(e[15]=[(0,l.Lk)("div",{class:"card-header"},[(0,l.Lk)("span",null,"快速访问")],-1)]))),default:(0,l.k6)((()=>[(0,l.Lk)("div",z,[(0,l.bF)(o,{type:"primary",onClick:e[1]||(e[1]=a=>O("/admin/teacher-management"))},{default:(0,l.k6)((()=>[(0,l.bF)(t,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.User))])),_:1}),e[16]||(e[16]=(0,l.eW)(" 教师管理 "))])),_:1}),(0,l.bF)(o,{type:"success",onClick:e[2]||(e[2]=a=>O("/admin/student-management"))},{default:(0,l.k6)((()=>[(0,l.bF)(t,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.Avatar))])),_:1}),e[17]||(e[17]=(0,l.eW)(" 学生管理 "))])),_:1}),(0,l.bF)(o,{type:"warning",onClick:e[3]||(e[3]=a=>O("/admin/courses"))},{default:(0,l.k6)((()=>[(0,l.bF)(t,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.Reading))])),_:1}),e[18]||(e[18]=(0,l.eW)(" 课程管理 "))])),_:1}),(0,l.bF)(o,{type:"danger",onClick:e[4]||(e[4]=a=>O("/admin/material-review"))},{default:(0,l.k6)((()=>[(0,l.bF)(t,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.Document))])),_:1}),e[19]||(e[19]=(0,l.eW)(" 材料审核 "))])),_:1}),(0,l.bF)(o,{type:"info",onClick:e[5]||(e[5]=a=>O("/admin/educational-admin"))},{default:(0,l.k6)((()=>[(0,l.bF)(t,null,{default:(0,l.k6)((()=>[(0,l.bF)((0,r.R1)(c.School))])),_:1}),e[20]||(e[20]=(0,l.eW)(" 教务管理 "))])),_:1})])])),_:1})])),_:1})])),_:1})])}}},K=t(1241);const E=(0,K.A)(B,[["__scopeId","data-v-5f4d189e"]]);var U=E}}]);
//# sourceMappingURL=887.11fc4954.js.map