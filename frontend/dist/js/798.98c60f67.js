"use strict";(self["webpackChunktcr_system_frontend"]=self["webpackChunktcr_system_frontend"]||[]).push([[798],{8798:function(e,a,t){t.r(a),t.d(a,{default:function(){return R}});var l=t(6768),s=t(4232),r=t(144),u=t(782),o=t(1387),d=t(788),n=t.n(d),c=t(1219);const i={class:"student-home"},k={class:"welcome-message"},h={class:"card-header"},p={key:0,class:"empty-block"},b={key:1,class:"table-container"},v={key:1,class:"loading-placeholder"},f={class:"card-header"},w={key:0,class:"empty-block"},m={key:1,class:"table-container"},y={key:1,class:"loading-placeholder"},g={class:"card-header"},_={key:0,class:"empty-block"},F={key:1,class:"table-container"},C={key:1,class:"loading-placeholder"},W=200;var X={__name:"Home",setup(e){const a=(0,u.Pj)(),t=(0,o.rd)(),d=(0,l.EW)((()=>a.state.user.userInfo)),X=(0,r.KR)(!1),L=(0,r.KR)([]),E=(0,r.KR)(!1),R=(0,r.KR)(!1),z=(0,r.KR)([]),K=(0,r.KR)(!1),S=(0,r.KR)(!1),I=(0,r.KR)([]),N=(0,r.KR)(!1),A=window.console.error,x=function(){const e=Array.from(arguments),a=e[0];if(!a||"string"!==typeof a||!a.includes("ResizeObserver"))return A.apply(window.console,e)},B=async()=>{X.value=!0;try{const e=localStorage.getItem("token"),a=await n().get("/api/student/courses",{headers:{Authorization:`Bearer ${e}`}});200===a.data.code?(L.value=(a.data.data||[]).slice(0,5),console.log("获取最近课程成功:",L.value),(0,l.dY)((()=>{E.value=!0})),T()):console.error("获取课程失败:",a.data.message)}catch(e){console.error("获取课程出错:",e)}finally{X.value=!1}},$=async()=>{R.value=!0;try{const e=localStorage.getItem("token"),a=await n().get("/api/student/courses",{headers:{Authorization:`Bearer ${e}`}});if(200===a.data.code){const t=a.data.data||[],s=await n().get("/api/material/list",{params:{pageNum:1,pageSize:5,orderBy:"create_time",orderType:"desc"},headers:{Authorization:`Bearer ${e}`}});if(200===s.data.code){const e=s.data.data.records||[];z.value=e.map((e=>{const a=t.find((a=>a.id===e.courseId));return{...e,courseName:a?a.name:"未知课程"}})),(0,l.dY)((()=>{K.value=!0})),console.log("获取最新资料成功:",z.value)}else console.error("获取资料失败:",s.data.message)}}catch(e){console.error("获取资料出错:",e)}finally{R.value=!1}},T=async()=>{S.value=!0;try{const e=await n().get("/api/assignment/student/list",{params:{current:1,size:5,status:1}});if(200===e.data.code){const a=e.data.data.records||[],t=a.filter((e=>!e.submitted)).slice(0,5);I.value=t,(0,l.dY)((()=>{N.value=!0})),console.log("获取待完成作业成功:",I.value)}else console.error("获取作业失败:",e.data.message)}catch(e){console.error("获取作业出错:",e)}finally{S.value=!1}},Y=e=>{if(!e)return"未知时间";const a=new Date(e);return a.toLocaleString()},q=e=>{switch(e){case 0:return"danger";case 1:return"success";case 2:return"info";default:return""}},M=e=>{switch(e){case 0:return"已关闭";case 1:return"正常";case 2:return"已结束";default:return"未知"}},j=e=>{t.push({name:"StudentMaterials",query:{courseId:e}})},D=e=>{window.open(`/api/material/download/${e.id}`,"_blank"),c.nk.success("开始下载资料")},H=()=>{t.push({name:"StudentCourses"})},O=()=>{L.value.length>0?t.push({name:"StudentMaterials",query:{courseId:L.value[0].id}}):(t.push({name:"StudentCourses"}),c.nk.info("请先选择一门课程"))},P=()=>{t.push({name:"StudentAssignments"})};return(0,l.sV)((()=>{window.console.error=x,B(),$()})),(0,l.xo)((()=>{window.console.error=A})),(e,a)=>{const t=(0,l.g2)("el-card"),r=(0,l.g2)("el-button"),u=(0,l.g2)("el-empty"),o=(0,l.g2)("el-table-column"),n=(0,l.g2)("el-tag"),c=(0,l.g2)("el-table"),A=(0,l.g2)("el-col"),x=(0,l.g2)("el-row"),B=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)("div",i,[a[12]||(a[12]=(0,l.Lk)("h1",null,"学生首页",-1)),(0,l.bF)(t,{class:"welcome-card"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",k,[(0,l.Lk)("h2",null,"欢迎回来，"+(0,s.v_)(d.value?.realName||"同学"),1),a[0]||(a[0]=(0,l.Lk)("p",null,"您可以在这里查看您的课程、学习资料和提交反馈。",-1))])])),_:1}),(0,l.bF)(x,{gutter:20,class:"mt-20"},{default:(0,l.k6)((()=>[(0,l.bF)(A,{span:12},{default:(0,l.k6)((()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(t,null,{header:(0,l.k6)((()=>[(0,l.Lk)("div",h,[a[2]||(a[2]=(0,l.Lk)("span",null,"我的课程",-1)),(0,l.bF)(r,{type:"text",onClick:H},{default:(0,l.k6)((()=>a[1]||(a[1]=[(0,l.eW)("查看全部")]))),_:1})])])),default:(0,l.k6)((()=>[0===L.value.length?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.bF)(u,{description:"暂无课程数据"})])):((0,l.uX)(),(0,l.CE)("div",b,[E.value?((0,l.uX)(),(0,l.Wv)(c,{key:0,data:L.value,style:{width:"100%"},height:W,"show-header":!0,"highlight-current-row":!1},{default:(0,l.k6)((()=>[(0,l.bF)(o,{prop:"name",label:"课程名称"}),(0,l.bF)(o,{prop:"teacherName",label:"教师",width:"120"}),(0,l.bF)(o,{prop:"classTime",label:"上课时间",width:"130"}),(0,l.bF)(o,{prop:"classLocation",label:"上课地点",width:"130"}),(0,l.bF)(o,{label:"状态",width:"100"},{default:(0,l.k6)((e=>[(0,l.bF)(n,{type:q(e.row.status)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(M(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),(0,l.bF)(o,{label:"操作",width:"100"},{default:(0,l.k6)((e=>[(0,l.bF)(r,{type:"primary",size:"small",onClick:a=>j(e.row.id)},{default:(0,l.k6)((()=>a[3]||(a[3]=[(0,l.eW)(" 查看资料 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):((0,l.uX)(),(0,l.CE)("div",v))]))])),_:1})),[[B,X.value]])])),_:1}),(0,l.bF)(A,{span:12},{default:(0,l.k6)((()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(t,null,{header:(0,l.k6)((()=>[(0,l.Lk)("div",f,[a[5]||(a[5]=(0,l.Lk)("span",null,"最新资料",-1)),(0,l.bF)(r,{type:"text",onClick:O},{default:(0,l.k6)((()=>a[4]||(a[4]=[(0,l.eW)("查看全部")]))),_:1})])])),default:(0,l.k6)((()=>[0===z.value.length?((0,l.uX)(),(0,l.CE)("div",w,[(0,l.bF)(u,{description:"暂无资料数据"})])):((0,l.uX)(),(0,l.CE)("div",m,[K.value?((0,l.uX)(),(0,l.Wv)(c,{key:0,data:z.value,style:{width:"100%"},height:W,"show-header":!0,"highlight-current-row":!1},{default:(0,l.k6)((()=>[(0,l.bF)(o,{prop:"name",label:"资料名称"}),(0,l.bF)(o,{prop:"courseName",label:"所属课程",width:"120"}),(0,l.bF)(o,{label:"上传时间",width:"180"},{default:(0,l.k6)((e=>[(0,l.eW)((0,s.v_)(Y(e.row.createTime)),1)])),_:1}),(0,l.bF)(o,{label:"操作",width:"100"},{default:(0,l.k6)((e=>[(0,l.bF)(r,{type:"primary",size:"small",onClick:a=>D(e.row)},{default:(0,l.k6)((()=>a[6]||(a[6]=[(0,l.eW)(" 下载 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):((0,l.uX)(),(0,l.CE)("div",y))]))])),_:1})),[[B,R.value]])])),_:1})])),_:1}),(0,l.bF)(x,{class:"mt-20"},{default:(0,l.k6)((()=>[(0,l.bF)(A,{span:24},{default:(0,l.k6)((()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(t,null,{header:(0,l.k6)((()=>[(0,l.Lk)("div",g,[a[8]||(a[8]=(0,l.Lk)("span",null,"待完成作业",-1)),(0,l.bF)(r,{type:"text",onClick:P},{default:(0,l.k6)((()=>a[7]||(a[7]=[(0,l.eW)("查看全部")]))),_:1})])])),default:(0,l.k6)((()=>[0===I.value.length?((0,l.uX)(),(0,l.CE)("div",_,[(0,l.bF)(u,{description:"暂无待完成作业"})])):((0,l.uX)(),(0,l.CE)("div",F,[N.value?((0,l.uX)(),(0,l.Wv)(c,{key:0,data:I.value,style:{width:"100%"},height:W,"show-header":!0,"highlight-current-row":!1},{default:(0,l.k6)((()=>[(0,l.bF)(o,{prop:"title",label:"作业标题","min-width":"180"}),(0,l.bF)(o,{prop:"courseName",label:"所属课程",width:"150"}),(0,l.bF)(o,{label:"截止日期",width:"180"},{default:(0,l.k6)((e=>[(0,l.eW)((0,s.v_)(Y(e.row.deadline)),1)])),_:1}),(0,l.bF)(o,{label:"状态",width:"100"},{default:(0,l.k6)((e=>[(0,l.bF)(n,{type:q(e.row.status)},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(M(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),(0,l.bF)(o,{label:"提交状态",width:"100"},{default:(0,l.k6)((e=>[e.row.submitted?((0,l.uX)(),(0,l.Wv)(n,{key:0,type:"success"},{default:(0,l.k6)((()=>a[9]||(a[9]=[(0,l.eW)("已提交")]))),_:1})):((0,l.uX)(),(0,l.Wv)(n,{key:1,type:"danger"},{default:(0,l.k6)((()=>a[10]||(a[10]=[(0,l.eW)("未提交")]))),_:1}))])),_:1}),(0,l.bF)(o,{label:"操作",width:"120"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{type:"success",size:"small",onClick:P},{default:(0,l.k6)((()=>a[11]||(a[11]=[(0,l.eW)(" 查看 ")]))),_:1})])),_:1})])),_:1},8,["data"])):((0,l.uX)(),(0,l.CE)("div",C))]))])),_:1})),[[B,S.value]])])),_:1})])),_:1})])}}},L=t(1241);const E=(0,L.A)(X,[["__scopeId","data-v-784ed8f5"]]);var R=E}}]);
//# sourceMappingURL=798.98c60f67.js.map