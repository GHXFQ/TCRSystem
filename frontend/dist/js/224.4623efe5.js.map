{"version":3,"file":"js/224.4623efe5.js","mappings":"+UA8CA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAeC,EAAAA,EAAAA,IAAI,MACnBC,GAAUD,EAAAA,EAAAA,KAAI,GAEdE,GAAeC,EAAAA,EAAAA,IAAS,CAC5BC,SAAU,GACVC,SAAU,GACVC,gBAAiB,GACjBC,SAAU,GACVC,MAAO,GACPC,MAAO,GACPC,KAAM,IAGFC,EAAeA,CAACC,EAAMC,EAAOC,KACnB,KAAVD,EACFC,EAAS,IAAIC,MAAM,WAEkB,KAAjCb,EAAaI,iBACfP,EAAac,OAAOG,cAAc,mBAEpCF,IACF,EAGIG,EAAgBA,CAACL,EAAMC,EAAOC,KACpB,KAAVD,EACFC,EAAS,IAAIC,MAAM,YACVF,IAAUX,EAAaG,SAChCS,EAAS,IAAIC,MAAM,cAEnBD,GACF,EAGII,EAAQ,CACZd,SAAU,CACR,CAAEe,UAAU,EAAMC,QAAS,SAAUC,QAAS,QAC9C,CAAEC,IAAK,EAAGC,IAAK,GAAIH,QAAS,iBAAkBC,QAAS,SAEzDhB,SAAU,CACR,CAAEc,UAAU,EAAMK,UAAWb,EAAcU,QAAS,QACpD,CAAEC,IAAK,EAAGF,QAAS,aAAcC,QAAS,SAE5Cf,gBAAiB,CACf,CAAEa,UAAU,EAAMK,UAAWP,EAAeI,QAAS,SAEvDd,SAAU,CACR,CAAEY,UAAU,EAAMC,QAAS,UAAWC,QAAS,SAEjDb,MAAO,CACL,CAAEW,UAAU,EAAOM,KAAM,QAASL,QAAS,aAAcC,QAAS,SAEpEZ,MAAO,CACL,CAAEU,UAAU,EAAOO,QAAS,gBAAiBN,QAAS,aAAcC,QAAS,SAE/EX,KAAM,CACJ,CAAES,UAAU,EAAMC,QAAS,QAASC,QAAS,YAI3CM,EAAiBC,UACrB,GAAK7B,EAAac,MAElB,UACQd,EAAac,MAAMgB,WACzB5B,EAAQY,OAAQ,EAEhB,IACE,MAAMiB,QAAiBC,IAAAA,KAAW,qBAAsB7B,GAE7B,MAAvB4B,EAASE,KAAKC,MAChBC,EAAAA,GAAUC,QAAQ,YAClBtC,EAAOuC,KAAK,WAEZF,EAAAA,GAAUG,MAAMP,EAASE,KAAKZ,SAAW,WAE7C,CAAE,MAAOiB,GACPC,QAAQD,MAAMA,GACdH,EAAAA,GAAUG,MAAMA,EAAMP,UAAUE,MAAMZ,SAAW,WACnD,CAAE,QACAnB,EAAQY,OAAQ,CAClB,CACF,CAAE,MAAOwB,GACPC,QAAQD,MAAM,SAAUA,EAC1B,GAGIE,EAAYA,KAChB1C,EAAOuC,KAAK,SAAS,E,m2ECjIvB,MAAMI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://tcr-system-frontend/./src/views/Register.vue","webpack://tcr-system-frontend/./src/views/Register.vue?157d"],"sourcesContent":["<template>\r\n  <div class=\"register-container\">\r\n    <div class=\"register-box\">\r\n      <div class=\"register-title\">\r\n        <h2>用户注册</h2>\r\n      </div>\r\n      <el-form ref=\"registerForm\" :model=\"registerData\" :rules=\"rules\" label-width=\"100px\" class=\"register-form\">\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"registerData.username\" placeholder=\"请输入用户名/学号/工号\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"registerData.password\" type=\"password\" placeholder=\"请输入密码\" show-password />\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\r\n          <el-input v-model=\"registerData.confirmPassword\" type=\"password\" placeholder=\"请再次输入密码\" show-password />\r\n        </el-form-item>\r\n        <el-form-item label=\"真实姓名\" prop=\"realName\">\r\n          <el-input v-model=\"registerData.realName\" placeholder=\"请输入真实姓名\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"registerData.email\" placeholder=\"请输入邮箱\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号\" prop=\"phone\">\r\n          <el-input v-model=\"registerData.phone\" placeholder=\"请输入手机号\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"角色\" prop=\"role\">\r\n          <el-radio-group v-model=\"registerData.role\">\r\n            <el-radio :label=\"0\">学生</el-radio>\r\n            <el-radio :label=\"1\">教师</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" :loading=\"loading\" @click=\"handleRegister\">注册</el-button>\r\n          <el-button @click=\"goToLogin\">返回登录</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport axios from 'axios'\r\n\r\nconst router = useRouter()\r\nconst registerForm = ref(null)\r\nconst loading = ref(false)\r\n\r\nconst registerData = reactive({\r\n  username: '',\r\n  password: '',\r\n  confirmPassword: '',\r\n  realName: '',\r\n  email: '',\r\n  phone: '',\r\n  role: 0\r\n})\r\n\r\nconst validatePass = (rule, value, callback) => {\r\n  if (value === '') {\r\n    callback(new Error('请输入密码'))\r\n  } else {\r\n    if (registerData.confirmPassword !== '') {\r\n      registerForm.value?.validateField('confirmPassword')\r\n    }\r\n    callback()\r\n  }\r\n}\r\n\r\nconst validatePass2 = (rule, value, callback) => {\r\n  if (value === '') {\r\n    callback(new Error('请再次输入密码'))\r\n  } else if (value !== registerData.password) {\r\n    callback(new Error('两次输入密码不一致'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\nconst rules = {\r\n  username: [\r\n    { required: true, message: '请输入用户名', trigger: 'blur' },\r\n    { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\r\n  ],\r\n  password: [\r\n    { required: true, validator: validatePass, trigger: 'blur' },\r\n    { min: 6, message: '密码长度不能小于6位', trigger: 'blur' }\r\n  ],\r\n  confirmPassword: [\r\n    { required: true, validator: validatePass2, trigger: 'blur' }\r\n  ],\r\n  realName: [\r\n    { required: true, message: '请输入真实姓名', trigger: 'blur' }\r\n  ],\r\n  email: [\r\n    { required: false, type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur' }\r\n  ],\r\n  phone: [\r\n    { required: false, pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号码', trigger: 'blur' }\r\n  ],\r\n  role: [\r\n    { required: true, message: '请选择角色', trigger: 'change' }\r\n  ]\r\n}\r\n\r\nconst handleRegister = async () => {\r\n  if (!registerForm.value) return\r\n  \r\n  try {\r\n    await registerForm.value.validate()\r\n    loading.value = true\r\n    \r\n    try {\r\n      const response = await axios.post('/api/user/register', registerData)\r\n      \r\n      if (response.data.code === 200) {\r\n        ElMessage.success('注册成功，请登录')\r\n        router.push('/login')\r\n      } else {\r\n        ElMessage.error(response.data.message || '注册失败，请重试')\r\n      }\r\n    } catch (error) {\r\n      console.error(error)\r\n      ElMessage.error(error.response?.data?.message || '注册失败，请重试')\r\n    } finally {\r\n      loading.value = false\r\n    }\r\n  } catch (error) {\r\n    console.error('表单验证失败', error)\r\n  }\r\n}\r\n\r\nconst goToLogin = () => {\r\n  router.push('/login')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background-color: #f5f7fa;\r\n  padding: 20px 0;\r\n}\r\n\r\n.register-box {\r\n  width: 500px;\r\n  padding: 30px;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.register-title {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.register-title h2 {\r\n  font-weight: 500;\r\n  color: #409eff;\r\n}\r\n\r\n.register-form {\r\n  margin-top: 20px;\r\n}\r\n</style> ","import script from \"./Register.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Register.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=b597bf70&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b597bf70\"]])\n\nexport default __exports__"],"names":["router","useRouter","registerForm","ref","loading","registerData","reactive","username","password","confirmPassword","realName","email","phone","role","validatePass","rule","value","callback","Error","validateField","validatePass2","rules","required","message","trigger","min","max","validator","type","pattern","handleRegister","async","validate","response","axios","data","code","ElMessage","success","push","error","console","goToLogin","__exports__"],"sourceRoot":""}